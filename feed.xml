<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">IT調べものブログ</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="/feed.xml" />
<link rel="alternate" type="text/html" href="" />
<updated>2016-11-20T12:55:58-05:00</updated>
<id>/</id>
<author>
  <name>sankame</name>
  <uri>/</uri>
  <email>m2ad0504@outlook.jp</email>
</author>


<entry>
  <title type="html"><![CDATA[WCSession#sendMessage()の代わりにupdateApplicationContext()を使う際の注意点]]></title>
 <link rel="alternate" type="text/html" href="/applewatch/wcsession_sendmessage_slow_in_swift3/" />
  <id>/applewatch/wcsession_sendmessage_slow_in_swift3</id>
  <published>2016-11-20T19:00:00-05:00</published>
  <updated>2016-11-20T19:00:00-05:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年11月20日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.6
[IDE] Xcode 8.1
[Swift] 3.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;WCSession#sendMessage()を使ってAppleWatchからiPhoneアプリへメッセージを送っても、30秒ほどしないと通知されない。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;AppleWatch側&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-swift&quot; data-lang=&quot;swift&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;IBAction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tapButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;fromChild&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;AppleWatchからのメッセージ&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;replyHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reply&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;errorHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;iPhone側&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-swift&quot; data-lang=&quot;swift&quot;&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didReceiveMessage&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;replyHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;escaping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;watchMessage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;fromChild&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;as&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;watchMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;error&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 対策&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;replyHandlerを設定するなど、いろいろ情報はあったのですが、結局 sendMessage() を諦め、updateApplicationContext() を使うことにしました。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ただ updateApplicationContext() は状態が変わった際に通知するためのメソッドなので、二回目以降の値が変わらないとiPhone側のメソッドが呼び出されません。&lt;/p&gt;

&lt;p&gt;API仕様書には明記されていませんがそのような動きをしています。(「3. 参考ページ」参照)&lt;/p&gt;

&lt;p&gt;ですので、sendMessage() と同じように使いたい場合は、毎回変わる値をダミーとして設定すると実現できます。(多少強引ですが、下記例では時間を設定しています)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;AppleWatch側&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-swift&quot; data-lang=&quot;swift&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;IBAction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tapButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dateFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Locale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;ja_JP&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dateFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeStyle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;medium&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dateFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dateStyle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;medium&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dictionary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&amp;quot;message&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;AppleWatchからのメッセージ&amp;quot;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;date&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dateFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;NSDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;fromChild&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;updateApplicationContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;iPhone側&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-swift&quot; data-lang=&quot;swift&quot;&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didReceiveApplicationContext&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;applicationContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;DispatchQueue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Void&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;watchMessage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;applicationContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;fromChild&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;as&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dictionary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;watchMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;message&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;3. 参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/reference/watchconnectivity/wcsession&quot; target=&quot;_blank&quot;&gt;API Reference WCSession&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/applewatch/wcsession_sendmessage_slow_in_swift3/&quot;&gt;WCSession#sendMessage()の代わりにupdateApplicationContext()を使う際の注意点&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on November 20, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Type 'ViewController' does not conform to protocol 'WCSessionDelegate']]></title>
 <link rel="alternate" type="text/html" href="/swift/wcsessiondelegate_in_swift3/" />
  <id>/swift/wcsessiondelegate_in_swift3</id>
  <published>2016-11-14T19:00:00-05:00</published>
  <updated>2016-11-14T19:00:00-05:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年11月14日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.6
[IDE] Xcode 8.1
[Swift] 3.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;iPhone &amp;amp; AppleWatchアプリを作成中にSwiftを2.2から3へバージョンアップしたところ、iPhone側で下記のエラーが出るようになりました。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Type &amp;#39;ViewController&amp;#39; does not conform to protocol &amp;#39;WCSessionDelegate&amp;#39;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 解決&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ViewControllerに下記メソッドを追加するとエラーが消えました。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-swift&quot; data-lang=&quot;swift&quot;&gt;&lt;span class=&quot;n&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activationDidCompleteWith&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;activationState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSessionActivationState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sessionDidBecomeInactive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sessionDidDeactivate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WCSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;activate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;下記の仕様書にもこれらのメソッドは必須と書かれています。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/reference/watchconnectivity/wcsessiondelegate&quot; target=&quot;_blank&quot;&gt;[API Reference] WCSessionDelegate&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;3. 参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://forums.developer.apple.com/thread/63452&quot; target=&quot;_blank&quot;&gt;Migrating app from Swift 2.2 to 3.0 with WCSessionDelegate&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/swift/wcsessiondelegate_in_swift3/&quot;&gt;Type &#39;ViewController&#39; does not conform to protocol &#39;WCSessionDelegate&#39;&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on November 14, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Eclipseでタブをスペースに置換]]></title>
 <link rel="alternate" type="text/html" href="/eclipse/convert_tabs_to_spaces_on_eclipse/" />
  <id>/eclipse/convert_tabs_to_spaces_on_eclipse</id>
  <published>2016-10-07T20:00:00-04:00</published>
  <updated>2016-10-07T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年10月07日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[Eclipse] Mars.2 Release (4.5.2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;久々にEclipseをさわっていたら、タブをスペースに変換する設定に手間取ったのでメモ。&lt;/p&gt;

&lt;p&gt;(Windowsでもメニュー名を読み替えて頂くと使えます)&lt;/p&gt;

&lt;p&gt;プログラミングで使うインデントに関して、僕はタブ派ですが、職場や&lt;a href=&quot;http://www.gizmodo.jp/2016/09/tab-vs-space.html&quot; target=&quot;_blank&quot;&gt;最近の流れ&lt;/a&gt;からしてもスペースを使わざるを得ないでしょう。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 解決&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Eclipseに標準でついている機能が動かなかったので、AnyEditToolsというプラグインを入れました。&lt;/p&gt;

&lt;p&gt;メニューの [ヘルプ]-[Install new software] をクリック。&lt;/p&gt;

&lt;p&gt;[作業対象]に下記を入力。(anyぐらいまで打つと補完されます)&lt;/p&gt;

&lt;p&gt;&lt;code&gt;anyedit - http://andrei.gmxhome.de/eclipse/&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;とりあえず最新バージョンのAnyEditToolsにチェック。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/convert_tabs_to_spaces_on_eclipse/install.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;インストール&quot; alt=&quot;インストール&quot; src=&quot;/assets/posts/img/convert_tabs_to_spaces_on_eclipse/install.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[次へ]をクリック。&lt;/p&gt;

&lt;p&gt;途中ライセンスへの同意やセキュリティ警告が出ますが、最後までいくと再起動を求められるのでそのままOKをクリックします。&lt;/p&gt;

&lt;p&gt;起動後、Eclipse上で任意のファイルにタブを入力し、保存したタイミングでスペースに置換されます。&lt;/p&gt;

&lt;p&gt;変わらない場合や細かい設定をしたい場合は下記の設定画面から行って下さい。&lt;/p&gt;

&lt;p&gt;メニューの [Eclipse]-[環境設定] をクリック。&lt;/p&gt;

&lt;p&gt;[一般]-[エディタ]-[AnyEdit Tools]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/convert_tabs_to_spaces_on_eclipse/settings.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;設定&quot; alt=&quot;設定&quot; src=&quot;/assets/posts/img/convert_tabs_to_spaces_on_eclipse/settings.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Eclipseでマークダウンを書く人は[Remove trailing whitespace]のチェックを外しておいたほうがいいかもしれません。&lt;/p&gt;

&lt;p&gt;ファイルフィルタ(上記の[Add Filter])で拡張子mdを除外したり、プロジェクトごとに設定&lt;font color=&quot;green&quot;&gt;(*1)&lt;/font&gt;を変えることもできます。&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;(*1)プロジェクトごとの設定&lt;/font&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;プロジェクト・エクスプローラーの該当プロジェクトを右クリック。&lt;/li&gt;
&lt;li&gt;[プロパティ]-[AnyEdit Tools] をクリック。&lt;/li&gt;
&lt;li&gt;[Enable project specific settings]にチェックを入れる。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/eclipse/convert_tabs_to_spaces_on_eclipse/&quot;&gt;Eclipseでタブをスペースに置換&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on October 07, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[型 UrlValidator は使用すべきではありません]]></title>
 <link rel="alternate" type="text/html" href="/java/urlvalidator-is-deprecated/" />
  <id>/java/urlvalidator-is-deprecated</id>
  <published>2016-10-05T20:00:00-04:00</published>
  <updated>2016-10-05T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年10月05日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[Java] 1.8.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;久々にJavaで実装する機会がありました。標準ライブラリのjava.net.URLクラスは、URLとして解釈できない文字列を渡すと例外が投げられるので扱いずらいですね。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// IllegalArgumentException が発生。&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;不正なURL&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;うーん、最初、RFCを見て「URLとして許可されている文字列だけ渡す」という処理を入れようか迷いました。&lt;/p&gt;

&lt;p&gt;が、一から組むのも骨が折れるなあ～と思って、困った時の&lt;a href=&quot;https://commons.apache.org/&quot; target=&quot;_blank&quot;&gt;Apache Commons&lt;/a&gt;を探してみたら、しめしめ&lt;a href=&quot;https://commons.apache.org/proper/commons-validator/download_validator.cgi&quot; target=&quot;_blank&quot;&gt;Apache Commons Validator&lt;/a&gt;にUrlValidatorクラスというのがありました。&lt;/p&gt;

&lt;p&gt;早速このクラスをimportして使おうと思ったら、下記の警告が出てしまいました。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;型 UrlValidator は使用すべきではありません&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 解決&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;調べてみたところ、①のパッケージは非推奨で②に変えたら警告も消えました。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;font color=&quot;red&quot;&gt;①こっちは非推奨&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.validator.UrlValidator;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;font color=&quot;green&quot;&gt;②これを使って！&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.validator.routines.UrlValidator;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;3. 参考&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/14274919/the-type-urlvalidator-is-deprecated&quot; target=&quot;_blank&quot;&gt;The type UrlValidator is deprecated&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/java/urlvalidator-is-deprecated/&quot;&gt;型 UrlValidator は使用すべきではありません&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on October 05, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[.gitignoreをaddできない]]></title>
 <link rel="alternate" type="text/html" href="/git/how-to-add-gitignore/" />
  <id>/git/how-to-add-gitignore</id>
  <published>2016-08-20T20:00:00-04:00</published>
  <updated>2016-08-20T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年08月20日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[git] 2.7.4 (Apple Git-66)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;アプリのルートディレクトリに.gitignoreをおいたのですが、git status で見ても追加対象として出てきません。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 解決&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;最初(A)のように書いていたのですが、これだとダメで、[除外設定]→[例外] の順に書かないといけないようです。&lt;/p&gt;

&lt;p&gt;(「. が先頭にあるファイルは除外してね」→「但し .gitignore は例外だよ」)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;(A) 修正前&lt;/li&gt;
&lt;/ul&gt;

&lt;script src=&quot;https://gist.github.com/Sankame/5918ea08bcdc09322907a34434277f08.js&quot;&gt;&lt;/script&gt;

&lt;ul&gt;
&lt;li&gt;(B) 修正後&lt;/li&gt;
&lt;/ul&gt;

&lt;script src=&quot;https://gist.github.com/Sankame/dc68236f9088ca8964f43009cae285cd.js&quot;&gt;&lt;/script&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/git/how-to-add-gitignore/&quot;&gt;.gitignoreをaddできない&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on August 20, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[AppleWatchのアプリ開発でiOSアプリのデバッグ方法]]></title>
 <link rel="alternate" type="text/html" href="/applewatch/debug-ios-app-with-watchkit/" />
  <id>/applewatch/debug-ios-app-with-watchkit</id>
  <published>2016-08-06T20:00:00-04:00</published>
  <updated>2016-08-06T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年08月06日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[IDE] Xcode 7.3
[Swift] 2.1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 課題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;AppleWatchのアプリ開発で「WatchKit App」を起動すると、iOSアプリのブレークポイントで停止しない。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 対策&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;XcodeのデバッガーにiOSアプリを手動で追加する必要があります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;「WatchKit App」を選択してアプリ実行。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/debug-ios-app-with-watchkit/1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;xxx&quot; alt=&quot;xxx&quot; src=&quot;/assets/posts/img/debug-ios-app-with-watchkit/1.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;iOSアプリのシュミレーターで、iOSアプリを起動。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xcodeに戻って [Debug]-[Attach to Process] からiOSアプリを選択。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/debug-ios-app-with-watchkit/2.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;xxx&quot; alt=&quot;xxx&quot; src=&quot;/assets/posts/img/debug-ios-app-with-watchkit/2.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;左のパネルで[Debug navigator]を選択し、下記①②でiOSアプリが選択されていることを確認。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/debug-ios-app-with-watchkit/3.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;xxx&quot; alt=&quot;xxx&quot; src=&quot;/assets/posts/img/debug-ios-app-with-watchkit/3.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/applewatch/debug-ios-app-with-watchkit/&quot;&gt;AppleWatchのアプリ開発でiOSアプリのデバッグ方法&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on August 06, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[ショートカットのファイルパス]]></title>
 <link rel="alternate" type="text/html" href="/windows/windows_shortcut_path/" />
  <id>/windows/windows_shortcut_path</id>
  <published>2016-07-15T20:00:00-04:00</published>
  <updated>2016-07-15T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年07月15日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Windows 7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 課題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ファイル(①)に対してショートカット(②)を作った場合・・・&lt;/p&gt;

&lt;p&gt;① C:\tmp\test.txt&lt;/p&gt;

&lt;p&gt;② C:\tmp2\test.txt - ショートカット&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;エクスプローラーやスタートメニューの「ファイル名を指定して実行」から②を指定してもエラーになります。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/windows_shortcut_path/exec-file.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;ショートカットのファイルパス&quot; alt=&quot;ショートカットのファイルパス&quot; src=&quot;/assets/posts/img/windows_shortcut_path/exec-file.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;これは下記のように &lt;font color=&#39;red&#39;&gt;&amp;quot;.lnk&amp;quot;&lt;/font&gt; をつけると解決します。&lt;/p&gt;

&lt;p&gt;&lt;font color=&#39;red&#39;&gt;C:\tmp2\test.txt - ショートカット.lnk&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;OSの内部的にはこのパスになっているんだと思います・・・&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/windows/windows_shortcut_path/&quot;&gt;ショートカットのファイルパス&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on July 15, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[composer updateでUndefined indexエラー]]></title>
 <link rel="alternate" type="text/html" href="/composer/composer_error_undefined_index/" />
  <id>/composer/composer_error_undefined_index</id>
  <published>2016-06-24T20:00:00-04:00</published>
  <updated>2016-06-24T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年06月24日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[Laravel] 5.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. 問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;composer update を実行すると下記エラーが発生しました。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;Writing lock file
Generating autoload files
&amp;gt; php artisan clear-compiled
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ErrorException&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  Undefined index: HTTP_HOST
Script php artisan clear-compiled handling the post-update-cmd event returned with error code 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 解決策&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;HTTP_HOST でソースをgrepし、 /app/Http/routes.php 内の下記箇所を修正しました。&lt;/p&gt;

&lt;p&gt;(修正前)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;x&quot;&gt;$_SERVER[&amp;#39;HTTP_HOST&amp;#39;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(修正後)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;x&quot;&gt;Request::server(&amp;#39;HTTP_HOST&amp;#39;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;3. 参考&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/34055053/composer-returning-mysterious-error&quot; target=&quot;_blank&quot;&gt;Composer returning mysterious error&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/composer/composer_error_undefined_index/&quot;&gt;composer updateでUndefined indexエラー&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on June 24, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[トグル処理を楽に実装 (ビット演算)]]></title>
 <link rel="alternate" type="text/html" href="/programming-practice/bitwise_operator_toggle/" />
  <id>/programming-practice/bitwise_operator_toggle</id>
  <published>2016-05-26T20:00:00-04:00</published>
  <updated>2016-05-26T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月26日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[CentOS] 6.4 (64bit版カーネル)
[PHP] 5.4.17
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. XORでトグル処理&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;押すたびにON/OFFが切り替わるようなトグル処理を実装する場合はXORが便利です。&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/Sankame/46005a2dc4fed64a807f9c15cbb8c010.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;6行目、11行目 : 「XOR 1」するとビットが反転する性質を利用します。(下記)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;XOR&lt;/b&gt;&lt;/p&gt;

&lt;table border=&quot;1&quot;&gt;
&lt;tr&gt;&lt;td bgcolor=&quot;lightgray&quot;&gt;入力①&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td bgcolor=&quot;lightgray&quot;&gt;入力②&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td bgcolor=&quot;lightgray&quot;&gt;出力&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/programming-practice/bitwise_operator_toggle/&quot;&gt;トグル処理を楽に実装 (ビット演算)&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 26, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[状態管理を楽に実装 (ビット演算)]]></title>
 <link rel="alternate" type="text/html" href="/programming-practice/bitwise_operator_status_control/" />
  <id>/programming-practice/bitwise_operator_status_control</id>
  <published>2016-05-26T20:00:00-04:00</published>
  <updated>2016-05-26T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月26日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[CentOS] 6.4 (64bit版カーネル)
[PHP] 5.4.17
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. ORとANDで状態管理&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;複数の状態や権限をまとめて管理したい場合、2進数が便利です。&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/Sankame/5588e4ff2cec15e95d42592bd1746ba7.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;2-5行目 : 2進数の定数(10進数表記)を用意します。&lt;/p&gt;

&lt;p&gt;7行目 : ORでプログラミング言語を足していきます。&lt;/p&gt;

&lt;p&gt;Aさんが使える言語の位にビットが立つイメージです。(下記)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;    0001 (PHP)
    0010 (Ruby)
OR) 1000 (Perl)
----------
    1011 (Aさんが使えるプログラミング言語)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;11行目以降 : Aさんが使えるプログラミング言語は何か、ANDで問い合わせます。&lt;/p&gt;

&lt;p&gt;右端の位にビットが立っていれば結果がtrueになり、PHPが使えることが分かります。(下記)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;     1011 (Aさんが使えるプログラミング言語)
AND) 0001 (PHP)
----------
     0001 (PHPが使える)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/programming-practice/bitwise_operator_status_control/&quot;&gt;状態管理を楽に実装 (ビット演算)&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 26, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Let's Encrypt - certbotコマンド]]></title>
 <link rel="alternate" type="text/html" href="/ssl-tls/letsencrypt_certbot_command/" />
  <id>/ssl-tls/letsencrypt_certbot_command</id>
  <published>2016-05-14T20:00:00-04:00</published>
  <updated>2016-05-14T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#d14; float:right;&quot;&gt;更新日：2016年08月06日&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月14日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0. 環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[CentOS] 6.4 (64bit版カーネル)
[Apache] 2.2.15
[Firefox] 46.0.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1. Let&amp;#39;s Encryptのコマンド変更&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/ssl-tls/letsencrypt_renewal/&quot; target=&quot;_blank&quot;&gt;証明書を更新した際、&lt;/a&gt; 「letsencrypt-autoコマンドはもう古いよ」という警告が出たので、更新したいと思います。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2. 更新作業(【】はマスク情報)&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Let&amp;#39;s Encryptがβ版の時はgit cloneして /usr/local/src/letsencrypt ディレクトリを作成しましたが、今回はそれとは別ディレクトリを作成します。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# cd /usr/local/src&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# git clone https://github.com/certbot/certbot&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# cd certbot&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;疑似実行したところ成功したようなので、証明書の期限が迫ってきたら dry-run なしで実行してみたいと思います。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# ./certbot-auto renew --dry-run&lt;/span&gt;

  ：
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;省略&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  ：
Congratulations, all renewals succeeded. The following certs have been renewed:
/etc/letsencrypt/live/【ドメイン名】/fullchain.pem &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;success&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
** DRY RUN: simulating &lt;span class=&quot;s1&quot;&gt;&amp;#39;certbot renew&amp;#39;&lt;/span&gt; close to cert expiry
**          &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;The &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;certificates above have not been saved.&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;font id=&quot;cron&quot; color=&quot;red&quot;&gt;(2016/08/06, 追記)&lt;/font&gt; &lt;a href=&quot;/ssl-tls/letsencrypt_renewal/#cron&quot; target=&quot;_blank&quot;&gt;&lt;font color=&quot;green&quot;&gt;dry-runなしでの実行結果はこちら&lt;/font&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;① &lt;a href=&quot;https://letsencrypt.org/getting-started/&quot; target=&quot;_blank&quot;&gt;Getting Started&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;② &lt;a href=&quot;https://www.eff.org/deeplinks/2016/05/announcing-certbot-new-tls-robot&quot; target=&quot;_blank&quot;&gt;Announcing Certbot: EFF&amp;#39;s Client for Let&amp;#39;s Encrypt&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/ssl-tls/letsencrypt_certbot_command/&quot;&gt;Let&#39;s Encrypt - certbotコマンド&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 14, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[watchOSのバージョンエラー]]></title>
 <link rel="alternate" type="text/html" href="/applewatch/watchos_devices_not_available/" />
  <id>/applewatch/watchos_devices_not_available</id>
  <published>2016-05-08T20:00:00-04:00</published>
  <updated>2016-05-08T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月08日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0.環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[IDE] Xcode 7.3
[iOS] 9.3
[watchOS] 2.1

※MacとiPhoneはUSBケーブルで接続。
※iPhoneとAppleWatchはペアリング済み。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.問題 (文中【】はマスク)&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;AppleWatch用のサンプルプログラムを実機で動かそうとしたら下記3つのエラーが出ました。&lt;/p&gt;

&lt;p&gt;&lt;b&gt;エラー1&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;A build only device cannot be used to run this target.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;No supported watchOS devices are available. Pair a device to run your application or choose a simulated device as the destination.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;エラー2&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Could not launch &amp;#39;【アプリ名】 WatchKit App&amp;#39; on 【iPhoneデバイス名】&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;OS version lower than deployment target&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;エラー3&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Can&amp;#39;t install application&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;【アプリ名】 WatchKit App.app cannot be installed on 【AppleWatchデバイス名】.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;The Info.plist in 【アプリ名】 WatchKit App.app specifies a minimum iOS version of 2.2 which is too high to be installed on 【AppleWatchデバイス名】.&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2.手順&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;AppleWatch実機のOSバージョンとXcodeで指定しているターゲットバージョンが異なるようだったので、下記の変更を行ったら実機にインストールされました。&lt;/p&gt;

&lt;p&gt;プロジェクトナビゲーターで該当プロジェクトを選択。&lt;/p&gt;

&lt;p&gt;&amp;quot;Build Settings&amp;quot;を選択してターゲットを表示。&lt;font color=&quot;orange&quot;&gt;(A-1、A-2)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;watchOSのバージョンを実機に合わせます。(僕の場合2.2→2.1に変更) &lt;font color=&quot;orange&quot;&gt;(A-3)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;(&amp;quot;WatchKit App&amp;quot;の方を変更すると、&amp;quot;WatchKit Extension&amp;quot;の方も変わります)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/watchos_devices_not_available/change_the_version.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;100%&quot; height=&quot;100%&quot; title=&quot;ターゲットバージョン変更&quot; alt=&quot;ターゲットバージョン変更&quot; src=&quot;/assets/posts/img/watchos_devices_not_available/change_the_version.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;いくつかサンプルプログラムを作ってて、なぜこれだけターゲットバージョンがデフォルトで2.2になっていたのか不明です。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/applewatch/watchos_devices_not_available/&quot;&gt;watchOSのバージョンエラー&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 08, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[AppleWatch 開発中アプリの追加制限を回避]]></title>
 <link rel="alternate" type="text/html" href="/applewatch/unable_to_add_app_id/" />
  <id>/applewatch/unable_to_add_app_id</id>
  <published>2016-05-07T20:00:00-04:00</published>
  <updated>2016-05-07T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#d14; float:right;&quot;&gt;更新日：2016年05月11日&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月07日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0.環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[IDE] Xcode 7.3
[iOS] 9.3
[watchOS] 2.1

※MacとiPhoneはUSBケーブルで接続。
※iPhoneとAppleWatchはペアリング済み。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;AppleWatch用のサンプルプログラムを実機で動かしていたら、下記エラーが出るようになりました。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/unable_to_add_app_id/error_message.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;Unable to add App ID&quot; alt=&quot;Unable to add App ID&quot; src=&quot;/assets/posts/img/unable_to_add_app_id/error_message.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Unable to add App ID because the &amp;#39;10&amp;#39; App ID limit in &amp;#39;7&amp;#39; days has been exceeded.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;「7日間で10個のアプリID制限を超えたため、アプリIDを追加できません」か。。。&lt;/p&gt;

&lt;p&gt;Webで調べたところ回避策は2つありましたが、シンプルそうな①をやってみました。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;① Xcodeに新しいApple IDを追加して、それを使ってインストール&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;② 既に実機にインストール済みのアプリの Bundle ID を使い回す&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2.手順 (文中の【】はマスク)&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Xcodeに新しい Apple ID を追加&lt;/p&gt;

&lt;p&gt;アプリの[General]-[Team]をクリックし &amp;quot;Add an Account&amp;quot; を選択します。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/unable_to_add_app_id/add_account.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;70%&quot; height=&quot;70%&quot; title=&quot;AppleID追加&quot; alt=&quot;AppleID追加&quot; src=&quot;/assets/posts/img/unable_to_add_app_id/add_account.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Xcodeに追加するApple IDを要求されますが、未作成なので&amp;quot;Create Apple ID&amp;quot;をクリック。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/unable_to_add_app_id/required_to_sign_in.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;サインイン&quot; alt=&quot;サインイン&quot; src=&quot;/assets/posts/img/unable_to_add_app_id/required_to_sign_in.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;必要項目を入力していくと、最後に「入力したメールアドレス宛てにメールを送ったから確認してね」と表示されます。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/unable_to_add_app_id/verification_for_the_email.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;email確認&quot; alt=&quot;email確認&quot; src=&quot;/assets/posts/img/unable_to_add_app_id/verification_for_the_email.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;上記メールアドレス宛てに確認メールが届いているので、メール文中の&amp;quot;今すぐ確認&amp;quot;をクリックして登録を完了させます。&lt;/p&gt;

&lt;p&gt;再度、手順の最初に戻って、&amp;quot;Add an Account&amp;quot;を選択し、登録したての新しいApple IDを入力します。&lt;/p&gt;

&lt;p&gt;新しいApple IDを選択すると下記のメッセージが出るので&amp;quot;Fix Issue&amp;quot;→&amp;quot;Choose&amp;quot;をクリックして解消します。&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;【注意】ダイアログ内のプルダウンで新しいApple IDが選択されているか再度確認して下さい&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/unable_to_add_app_id/fix_the_issue.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;Fix Issue&quot; alt=&quot;Fix Issue&quot; src=&quot;/assets/posts/img/unable_to_add_app_id/fix_the_issue.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;そのままアプリをビルド＆起動すると署名関係の警告が何度か出ますが、&amp;quot;Fix issue&amp;quot; をクリックしていくと実機でアプリが実行できました。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;①&lt;a href=&quot;http://stackoverflow.com/questions/36922738/how-to-get-around-apple-app-id-insanity&quot; target=&quot;_blank&quot;&gt;How to get around Apple app ID insanity&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/applewatch/unable_to_add_app_id/&quot;&gt;AppleWatch 開発中アプリの追加制限を回避&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 07, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[AppleWatch実機でサンプル実行]]></title>
 <link rel="alternate" type="text/html" href="/applewatch/running_it_on_apple_watch/" />
  <id>/applewatch/running_it_on_apple_watch</id>
  <published>2016-05-04T20:00:00-04:00</published>
  <updated>2016-05-04T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月04日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0.環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[IDE] Xcode 7.3
[iOS] 9.3
[watchOS] 2.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.問題&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;AppleWatch用のサンプルプログラムを実機でも動かしたくなりました。&lt;/p&gt;

&lt;p&gt;最初下記の環境だったのですが、Xcodeでサンプルプログラムを実行すると、&amp;quot;paired device unavailable for development&amp;quot; というエラー出ました。&lt;/p&gt;

&lt;p&gt;原因が分からなかったので、とりあえずiOSを9.3にバージョンアップしました。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[IDE] Xcode 7.2.1
[iOS (iPhone)] 9.1
[watchOS (AppleWatch)] 2.1

※MacとiPhoneはUSBケーブルで接続。
※iPhoneとAppleWatchはペアリング済み。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;その後、今度は &amp;quot;Could not find Developer Disk Image&amp;quot; というエラーで先へ進めず。&lt;/p&gt;

&lt;p&gt;Xcodeの下記フォルダに9.3がないことが原因らしいのですが、そもそもXcode 7.2はiOS9.3には対応していないようです。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Finderを開き、左ペインの&amp;quot;アプリケーション&amp;quot;を選択すると、右ペインにXcode.appが表示されるので右クリックで&amp;quot;パッケージの内容を表示&amp;quot;
Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2.Xcodeバージョンアップ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Xcodeを 7.3に上げることにしました。&lt;/p&gt;

&lt;p&gt;・LaunchpadでXcodeを長押し後、Xcodeの左上の×印をクリックしアンインストール。&lt;/p&gt;

&lt;p&gt;　(Dockに残っているけど無視)&lt;/p&gt;

&lt;p&gt;・OS再起動。&lt;/p&gt;

&lt;p&gt;・App StoreからXcodeをインストール。&lt;/p&gt;

&lt;p&gt;　(Macをwifiルーターの近くに持って行って、電源コードをつないで…　終わるまで1時間以上かかりました)&lt;/p&gt;

&lt;p&gt;Launchpadでインストールが終わったことを確認して、Xcodeを起動すると無事7.3になってました。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Xcodeでサンプルプログラムをビルド＆起動。&lt;/p&gt;

&lt;p&gt;Xcode再インストール後は下記の警告が出ますが &amp;quot;Fix issue&amp;quot; をクリックして先へ進みます。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Failed to code sign &amp;quot;hello-watch WatchKit App&amp;quot;.

No provisioning profiles with a valid signing identity (i.e. certificate and private key pair) matching the bundle identifier “home.hello-watch.watchkitapp” were found.

Xcode can attempt to fix this issue. This will reset your code signing and provisioning settings to recommended values and resolve issues with signing identities and provisioning profiles.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ビルドは通ったようですが、起動時に下記エラーが出ました。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Error Launching &amp;#39;hello-watch WatchKit Extension&amp;#39;
Apple Watch is locked. Unlock the device and launch again.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Error Launching &amp;#39;hello-watch WatchKit Extension&amp;#39;
The operation couldn’t be completed. (FBSOpenApplicationErrorDomain error 3.)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;開発中アプリなのでAppleWatch側で許可が必要なようです。&lt;/p&gt;

&lt;p&gt;見慣れないアイコンが増えているので、これをタップ。(オレンジの線)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/running_it_on_apple_watch/installed_sample.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;30%&quot; height=&quot;30%&quot; title=&quot;AppleWatchサンプルアプリ&quot; alt=&quot;AppleWatchサンプルアプリ&quot; src=&quot;/assets/posts/img/running_it_on_apple_watch/installed_sample.jpg&quot;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;quot;信頼されていないAppデベロッパ&amp;quot;という警告が出るので、&amp;quot;信頼する&amp;quot; をタップ。&lt;/p&gt;

&lt;p&gt;再びXcodeでビルド＆起動すると、AppleWatch側で実行されるようになりました。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;①&lt;a href=&quot;http://stackoverflow.com/questions/33380684/ios-watch-kit-paired-device-unavailable-for-development&quot; target=&quot;_blank&quot;&gt;iOS: Watch Kit paired device unavailable for development&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;②&lt;a href=&quot;http://stackoverflow.com/questions/33885080/xcode-7-1-with-ios-9-2-error-could-not-find-developer-disk-image&quot; target=&quot;_blank&quot;&gt;Xcode 7.1 with iOS 9.2 Error (Could not find Developer Disk image) [duplicate]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;③&lt;a href=&quot;http://swift-bettychang.hatenadiary.jp/entry/2016/03/26/045524&quot; target=&quot;_blank&quot;&gt;Xcode7.3にアップデートできない&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;④&lt;a href=&quot;http://stackoverflow.com/questions/34384015/fbsopenapplicationerrordomain-error-3-when-trying-to-launch-a-watch-kit-app-on-a&quot; target=&quot;_blank&quot;&gt;FBSOpenApplicationErrorDomain error 3 when trying to launch a watch kit app on a physical device&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/applewatch/running_it_on_apple_watch/&quot;&gt;AppleWatch実機でサンプル実行&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 04, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[AppleWatchサンプルプログラム]]></title>
 <link rel="alternate" type="text/html" href="/applewatch/apple_watch_sample/" />
  <id>/applewatch/apple_watch_sample</id>
  <published>2016-05-01T20:00:00-04:00</published>
  <updated>2016-05-01T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年05月01日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0.環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[IDE] Xcode 7.2.1
[watchOS] 2.1
[Swift] 2.1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.完成イメージ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;メイン画面からサブ画面へ行って戻るサンプルを作成します。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/result.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;完成イメージ&quot; alt=&quot;完成イメージ&quot; src=&quot;/assets/posts/img/apple_watch_sample/result.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2.プロジェクト作成&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Xcodeのスプラッシュ画面で&amp;quot;Create a new Xcode project&amp;quot;を選択。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/splash.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;スプラッシュ画面&quot; alt=&quot;スプラッシュ画面&quot; src=&quot;/assets/posts/img/apple_watch_sample/splash.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;watchOS Applicationを選択。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/project_template.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;テンプレート選択&quot; alt=&quot;テンプレート選択&quot; src=&quot;/assets/posts/img/apple_watch_sample/project_template.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;適当なプロジェクト名を入力して下さい。&lt;/p&gt;

&lt;p&gt;サンプルなので&amp;quot;Notification&amp;quot;と&amp;quot;Glance&amp;quot;のチェックは外します。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/project_options.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;オプション選択&quot; alt=&quot;オプション選択&quot; src=&quot;/assets/posts/img/apple_watch_sample/project_options.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;プロジェクトを作成するフォルダを選択して下さい。&lt;/p&gt;

&lt;p&gt;下記のように /app/ を指定するとプロジェクトのパスは /app/hello-watch/ になります。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/folder.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;フォルダ選択&quot; alt=&quot;フォルダ選択&quot; src=&quot;/assets/posts/img/apple_watch_sample/folder.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;3.実装&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;左のプロジェクトナビゲーターで&amp;quot;Interface.storyboard&amp;quot;を選択。(A-1)&lt;/p&gt;

&lt;p&gt;デフォルトで用意されている Interface Controller を選択して、Identifier に適当な値(例ではIC1)を入力。 (A-2、A-3、A-4)&lt;/p&gt;

&lt;p&gt;ドラッグ＆ドロップで Label と Button を Interface Controller 上に配置します。 (A-5)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/ready_controller.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;100%&quot; height=&quot;100%&quot; title=&quot;コントローラ準備&quot; alt=&quot;コントローラ準備&quot; src=&quot;/assets/posts/img/apple_watch_sample/ready_controller.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ドラッグ＆ドロップで Interface Controller をもう一つ追加。(B-1)&lt;/p&gt;

&lt;p&gt;追加した方を選択し、Identifier に適当な値(例ではIC2)を入力。 (B-2、B-3)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/ready_controller2.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;80%&quot; height=&quot;80%&quot; title=&quot;コントローラ準備&quot; alt=&quot;コントローラ準備&quot; src=&quot;/assets/posts/img/apple_watch_sample/ready_controller2.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;上記のIC2に Label を配置し、IC2と入力しておきます。&lt;/p&gt;

&lt;p&gt;区別するため、IC1に配置した Label にはIC1と入力します。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/ready_controller3.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;コントローラ準備&quot; alt=&quot;コントローラ準備&quot; src=&quot;/assets/posts/img/apple_watch_sample/ready_controller3.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;アシスタントエディターを表示します。(C-1)&lt;/p&gt;

&lt;p&gt;Button を右クリックし、[Sent Actions]-[selector] からドラッグ＆ドロップでエディターまで線を伸ばします。(C-2)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/coding1.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;100%&quot; height=&quot;100%&quot; title=&quot;実装1&quot; alt=&quot;実装1&quot; src=&quot;/assets/posts/img/apple_watch_sample/coding1.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;適当なメソッド名を入力します。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/coding2.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;80%&quot; height=&quot;80%&quot; title=&quot;実装2&quot; alt=&quot;実装2&quot; src=&quot;/assets/posts/img/apple_watch_sample/coding2.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Button タップ時に呼ばれるメソッドが追加されました。(D-1、D-2)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/coding3.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;80%&quot; height=&quot;80%&quot; title=&quot;実装3&quot; alt=&quot;実装3&quot; src=&quot;/assets/posts/img/apple_watch_sample/coding3.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;上記で追加したメソッドにIC2へ遷移するコードを記述します。&lt;/p&gt;

&lt;p&gt;(IC1へ戻るリンクは自動で作成されます)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-swift&quot; data-lang=&quot;swift&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;IBAction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onPushButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pushControllerWithName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;IC2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;some messages&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;シュミレーターで Apple Watch を選択し、[Command]-[R]キーを押すと数十秒後にプログラムが実行されます。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/apple_watch_sample/run.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;100%&quot; height=&quot;100%&quot; title=&quot;実行&quot; alt=&quot;実行&quot; src=&quot;/assets/posts/img/apple_watch_sample/run.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;実機で起動させた際の&lt;a href=&quot;/applewatch/running_it_on_apple_watch/&quot; target=&quot;_blank&quot;&gt;記事はこちら。&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.haranicle.net/watchkit_push/&quot; target=&quot;_blank&quot;&gt;WatchKitでpush画面遷移&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/applewatch/apple_watch_sample/&quot;&gt;AppleWatchサンプルプログラム&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on May 01, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[pod setup で SSLエラー]]></title>
 <link rel="alternate" type="text/html" href="/cocoapods/pod_setup_ssl_error/" />
  <id>/cocoapods/pod_setup_ssl_error</id>
  <published>2016-04-20T20:00:00-04:00</published>
  <updated>2016-04-20T20:00:00-04:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年04月20日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0.環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[OS] Mac OS X 10.11.4
[cocoapods] 1.0.0.beta.6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.エラー内容&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;pod setupを実行すると下記エラーが発生。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod setup --verbose

Setting up CocoaPods master repo

Cloning spec repo &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;master&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; from &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;https://github.com/CocoaPods/Specs.git&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;branch &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;master&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;/usr/bin/git clone https://github.com/CocoaPods/Specs.git master
  Cloning into &lt;span class=&quot;s1&quot;&gt;&amp;#39;master&amp;#39;&lt;/span&gt;...
  fatal: unable to access &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://github.com/CocoaPods/Specs.git/&amp;#39;&lt;/span&gt;: SSLRead&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; error -9806
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;!&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; /usr/bin/git clone https://github.com/CocoaPods/Specs.git master

Cloning into &lt;span class=&quot;s1&quot;&gt;&amp;#39;master&amp;#39;&lt;/span&gt;...
fatal: unable to access &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://github.com/CocoaPods/Specs.git/&amp;#39;&lt;/span&gt;: SSLRead&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; error -9806

        ：
     【省略】
        ：
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2.解決方法&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Safariで下記URLにアクセス。(他のブラウザではダメ) &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com&quot; target=&quot;_blank&quot;&gt;https://github.com&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;再度、下記を実行するとwifi経由で1時間以上経ってからようやく成功…&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod setup --verbose

Setting up CocoaPods master repo

        ：
     【省略】
        ：

Setup completed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/20939105/pod-install-returns-fatal-error-ssl-certificate-issue&quot; target=&quot;_blank&quot;&gt;pod install returns fatal error: SSL certificate issue?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/cocoapods/pod_setup_ssl_error/&quot;&gt;pod setup で SSLエラー&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on April 20, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Let's Encrypt - 証明書更新]]></title>
 <link rel="alternate" type="text/html" href="/ssl-tls/letsencrypt_renewal/" />
  <id>/ssl-tls/letsencrypt_renewal</id>
  <published>2016-02-20T19:00:00-05:00</published>
  <updated>2016-02-20T19:00:00-05:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color:#d14; float:right;&quot;&gt;更新日：2016年11月09日&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年02月20日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;0.環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[CentOS] 6.4 (64bit版カーネル)
[Apache] 2.2.15
[Firefox] 44.0.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.メールで期限通知 (【】はマスク情報)&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;/ssl-tls/letsencrypt_setup/&quot; target=&quot;_blank&quot;&gt;年末に設定した&lt;/a&gt; Let&amp;#39;s Encrypt のSSL証明書の期限が迫り、下記のお知らせメールが届きました。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Let&amp;#39;s Encrypt certificate expiration notice

Hello,

Your certificate (or certificates) for the names listed below will expire in 17 days (on 04 Mar 16 17:44 +0000). Please make sure to renew your certificate before then, or visitors to your website will encounter errors.

【以下省略】
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ブラウザで有効期限を確認するとそろそろ切れそうです。&lt;/p&gt;

&lt;p&gt;ブラウザのアドレスバーの鍵マークをクリックし、[ &amp;gt; ] - [詳細を表示] - [セキュリティ] - [証明書を表示] - [有効期限]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/letsencrypt_renewal/ssl_before.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;SSL証明書更新前&quot; alt=&quot;SSL証明書更新前&quot; src=&quot;/assets/posts/img/letsencrypt_renewal/ssl_before.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;2.更新作業&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;公式マニュアルにそってやってみました。(参考ページ①)&lt;/p&gt;

&lt;p&gt;letsencrypt をインストールしたディレクトリに移動し、下記のコマンドを実行。&lt;/p&gt;

&lt;p&gt;(letsencrypt と letsencrypt-auto コマンドは互換性があるとのことなので、初回セットアップで使ったletsencrypt-autoを指定)&lt;/p&gt;

&lt;p&gt;(ディレクトリを忘れた場合は&lt;code&gt;locate letsencrypt-auto&lt;/code&gt;などで確認)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# cd /usr/local/src/letsencrypt/&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ./letsencrypt-auto renew&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;1分ほど待って下記メッセージが表示されました。成功したようです。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# ./letsencrypt-auto renew&lt;/span&gt;
Updating letsencrypt and virtual environment dependencies...You are using pip version 7.1.2, however version 8.0.2 is available.
You should consider upgrading via the &lt;span class=&quot;s1&quot;&gt;&amp;#39;pip install --upgrade pip&amp;#39;&lt;/span&gt; command.
....
Running with virtualenv: 【ディレクトリパス】 renew
Processing 【ディレクトリパス】
new certificate deployed without reload, fullchain is 【ディレクトリパス】/fullchain.pem

Congratulations, all renewals succeeded. The following certs have been renewed:
  【ディレクトリパス】/fullchain.pem &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;success&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;(2016/05/14, 追記) 証明書の更新は正常終了しましたが、下記の警告が出ました。&lt;/font&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;WARNING:certbot.cli:You are running with an old copy of letsencrypt-auto that does not receive updates, and is less reliable than more recent versions. We recommend upgrading to the latest certbot-auto script, or using native OS packages.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;letsencrypt-autoコマンドは古くなったようなので、次回から下記を使おうと思います。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/ssl-tls/letsencrypt_certbot_command/&quot; target=&quot;_blank&quot;&gt;certbot-autoコマンドの準備はこちら&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ブラウザをリロードしたり、再起動しても証明書の有効期限は変わらず。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;公式マニュアルにはありませんが、Webサーバーの再起動が必要なようです。(参考ページ②)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;# service httpd restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Webサーバーを再起動するとブラウザ側の有効期限も延長されました。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/letsencrypt_renewal/ssl_after.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;50%&quot; height=&quot;50%&quot; title=&quot;SSL証明書更新後&quot; alt=&quot;SSL証明書更新後&quot; src=&quot;/assets/posts/img/letsencrypt_renewal/ssl_after.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;font id=&quot;cron&quot; color=&quot;red&quot;&gt;(2016/08/06, 追記)&lt;/font&gt; そろそろ面倒になってきたので、証明書の更新をCronに設定しました。&lt;/p&gt;

&lt;p&gt;頻繁に更新するとエラーになるようなので(参考ページ③)、10日に1回の実行です。&lt;/p&gt;

&lt;p&gt;もし失敗していても、冒頭に書いた通知メールがLet&amp;#39;s Encryptから届くので、気付くことはできそうです。(【】内は読み替え)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# SSL証明書更新。&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Webサーバー再起動を伴うため、深夜に実行。&lt;/span&gt;
&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt; */10 * * sh /【ユーザー】/bin/letsencrypt-renew.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;script src=&quot;https://gist.github.com/Sankame/44a737ee39412c62b48a3392625569c6.js&quot;&gt;&lt;/script&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;font id=&quot;cron&quot; color=&quot;red&quot;&gt;(2016/08/22, 追記)&lt;/font&gt; 上記 renew.log を見たら更新が失敗していたので下記の対応を行いました。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;依存パッケージのインストールを求めるところで停止していたので、一度、手動で下記コマンドを実行。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;停止箇所&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Is this ok [y/N]: Exiting on user Command&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;手動実行したコマンド&lt;/p&gt;

&lt;p&gt;&lt;code&gt;/usr/local/src/certbot/certbot-auto renew&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;その際、「まだ期限ではないので更新をスキップしたよ」というメッセージが出ました。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;The following certs are not due for renewal yet:
  /etc/letsencrypt/live/【ドメイン名】/fullchain.pem (skipped)
No renewals were attempted.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;必ず更新するよう、コマンドに --force-renew オプションを追加。(上記 gist の COMMAND にも反映済み)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;下記メッセージが表示され、cronからの実行も成功しました。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Congratulations, all renewals succeeded.&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;また10日後くらいにちゃんと更新されているか見てみようと思います…&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;(2016/09/04, 追記) ログとブラウザを確認したところ、証明書は更新されていました。&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;これでしばらくは放っておいても大丈夫そうです。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# cat /var/log/letsencrypt/renew.log&lt;/span&gt;

　：
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;省略&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
　：
Congratulations, all renewals succeeded. The following certs have been renewed:
/etc/letsencrypt/live/【ドメイン名】/fullchain.pem &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;success&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;font id=&quot;cron&quot; color=&quot;red&quot;&gt;(2016/11/09, 追記)&lt;/font&gt; ブラウザ上で証明書の開始日がしばらく更新されていなかったので、上記 renew.log を見たところ、またもやエラーが出ていました…&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;エラー内容&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;Dependencies &lt;span class=&quot;nv&quot;&gt;Resolved&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;
 Package Arch Version Repository &lt;span class=&quot;nv&quot;&gt;Size&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;
Updating:
 openssl x86_64 1.0.1e-48.el6_8.3 updates 1.5 M
 openssl-devel x86_64 1.0.1e-48.el6_8.3 updates 1.2 M

Transaction &lt;span class=&quot;nv&quot;&gt;Summary&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;================================================================================&lt;/span&gt;
Upgrade &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt; Package&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

Total download size: 2.7 M
Is this ok &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;y/N&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;: Exiting on user Command
Could not install OS dependencies. Aborting bootstrap!
Automated renewal failed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;何とか依存パッケージのインストール確認をスキップできないものかと調べていたら、コマンド集を見つけ、下記のオプションでうまくいきました。(参考ページ④)&lt;/p&gt;

&lt;p&gt;&lt;code&gt;--non-interactive&lt;/code&gt; (上記 gist の COMMAND にも反映済み)&lt;/p&gt;

&lt;p&gt;ちなみに、同ページに --quiet を指定すると上記オプションも含む、と書かれていましたが、こちらはダメでした。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考ページ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;① &lt;a href=&quot;https://letsencrypt.readthedocs.org/en/latest/using.html#renewal&quot; target=&quot;_blank&quot;&gt;公式マニュアル　証明書更新&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;② &lt;a href=&quot;https://tech.nosuz.jp/2015/12/lets-encrypt-https/&quot; target=&quot;_blank&quot;&gt;Let’s Encryptから証明書を取得して常時HTTPS化&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;③ &lt;a href=&quot;http://qiita.com/pm11op/items/5759d4a2c755509f6d42&quot; target=&quot;_blank&quot;&gt;Let&amp;#39;s Encrypt で証明書を小刻みに自動更新&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;④ &lt;a href=&quot;https://letsencrypt.jp/command/&quot; target=&quot;_blank&quot;&gt;Let&amp;#39;s Encrypt コマンド集&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/ssl-tls/letsencrypt_renewal/&quot;&gt;Let&#39;s Encrypt - 証明書更新&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on February 20, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Rundeckでssh接続エラー]]></title>
 <link rel="alternate" type="text/html" href="/rundeck/rundeck_ssh_error/" />
  <id>/rundeck/rundeck_ssh_error</id>
  <published>2016-02-14T19:00:00-05:00</published>
  <updated>2016-02-14T19:00:00-05:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年02月14日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[CentOS] 5.6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;セットアップ (文中の【】はマスク)&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下記記事の「リモートサーバでの実行」にそってRundeckのリモート接続を試してみました。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://dev.classmethod.jp/server-side/server/try-rundeck-job/&quot; target=&quot;_blank&quot;&gt;ジョブスケジューラ「Rundeck」を試してみる&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;下記のエラーが出るが原因が分からず…&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/assets/posts/img/rundeck_ssh_error/rundeck_ssh_error.png&quot; target=&quot;_blank&quot;&gt;&lt;img width=&quot;100%&quot; height=&quot;100%&quot; title=&quot;RundeckSSHエラー&quot; alt=&quot;RundeckSSHエラー&quot; src=&quot;/assets/posts/img/rundeck_ssh_error/rundeck_ssh_error.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;22:34:10 remote 1. hogeと表示。 Authentication failure connecting to node: &lt;span class=&quot;s2&quot;&gt;&amp;quot;remote&amp;quot;&lt;/span&gt;. Make sure your resource definitions and credentials are up to date.
22:34:10 Failed: AuthenticationFailure: Authentication failure connecting to node: &lt;span class=&quot;s2&quot;&gt;&amp;quot;remote&amp;quot;&lt;/span&gt;. Make sure your resource definitions and credentials are up to date.
22:34:10 localhost Execution failed: 21: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Workflow result: , step failures: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Dispatch failed on &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; nodes: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;remote: AuthenticationFailure: Authentication failure connecting to node: &lt;span class=&quot;s2&quot;&gt;&amp;quot;remote&amp;quot;&lt;/span&gt;. Make sure your resource definitions and credentials are up to date.&lt;span class=&quot;o&quot;&gt;]}&lt;/span&gt;, Node failures: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=[&lt;/span&gt;AuthenticationFailure: Authentication failure connecting to node: &lt;span class=&quot;s2&quot;&gt;&amp;quot;remote&amp;quot;&lt;/span&gt;. Make sure your resource definitions and credentials are up to date.&lt;span class=&quot;o&quot;&gt;]}&lt;/span&gt;, status: failed&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Log levelを&amp;quot;Debug&amp;quot;にして調査。&lt;/p&gt;

&lt;p&gt;Rundeckの対象のプロジェクトで[Prepare and Run...]-[Log level] を&amp;quot;Debug&amp;quot;に変更し、エラーの詳細を表示します。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;エラー詳細を見ると、まず公開鍵認証を試みて失敗して、さらにその後パスワード認証でも失敗しているようです。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;22:37:48 Authentications that can &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;: publickey,password,keyboard-interactive
22:37:48 Next authentication method: publickey
22:37:48 Authentications that can &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;: password,keyboard-interactive
22:37:48 Next authentication method: password
22:37:48 Disconnecting from 【IPアドレス】 port 22
22:37:48 Authentication failure connecting to node: &lt;span class=&quot;s2&quot;&gt;&amp;quot;remote&amp;quot;&lt;/span&gt;. Make sure your resource definitions and credentials are up to date.
22:37:48 Failed: AuthenticationFailure: Authentication failure connecting to node: &lt;span class=&quot;s2&quot;&gt;&amp;quot;remote&amp;quot;&lt;/span&gt;. Make sure your resource definitions and credentials are up to date.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;おかしいなあ、そもそも公開鍵認証で接続できる想定なんだけど…&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Rundeck以前にそもそもsshで失敗しているようなので、ssh単体で実行してみます。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;c&quot;&gt;# ssh -i $(awk &amp;#39;/framework.ssh.keypath = / {print $3}&amp;#39; /etc/rundeck/framework.properties) rundeck@【IPアドレス】&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;さらにコマンドを簡素化して実行してみると、パスワードを設定していない公開鍵使っているのになぜかパスワードを聞かれます。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;22:16:34&lt;span class=&quot;o&quot;&gt;][&lt;/span&gt;rundeck@【サーバー名】 ~/.ssh&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh -i /var/lib/rundeck/.ssh/id_rsa rundeck@【IPアドレス】
rundeck@【IPアドレス】&lt;span class=&quot;s1&quot;&gt;&amp;#39;s password: &lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;Permission denied, please try again.&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;rundeck@【IPアドレス】&amp;#39;&lt;/span&gt;s password: 
Permission denied, please try again.
rundeck@【IPアドレス】&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;s password: 
Permission denied &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;publickey,gssapi-keyex,gssapi-with-mic,password&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;色々試した結果、接続先サーバーの公開鍵ファイルのパーミッションが原因でした。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;接続元&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;ssh -i /var/lib/rundeck/.ssh/id_rsa rundeck@【IPアドレス】
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;接続先&lt;/p&gt;

&lt;p&gt;パーミッションが緩い分には問題ないだろうと思っていたら、&lt;font color=&quot;red&quot;&gt;厳密に600じゃないとダメ&lt;/font&gt;なんですね。。。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;chmod 600 authorized_keys&lt;/code&gt; で下記のように修正したらssh接続もRundeckからのリモート接続も成功しました。&lt;/p&gt;

&lt;p&gt;(変更前)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;-rw-rw-r--. &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; rundeck rundeck &lt;span class=&quot;m&quot;&gt;403&lt;/span&gt; 2月 &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt; 15:58 &lt;span class=&quot;m&quot;&gt;2016&lt;/span&gt; authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(変更後)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;-rw-------. &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; rundeck rundeck &lt;span class=&quot;m&quot;&gt;403&lt;/span&gt; 2月 &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt; 15:58 &lt;span class=&quot;m&quot;&gt;2016&lt;/span&gt; authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;参考になった記事&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://qiita.com/gotohiro55/items/36a22516de2b381b3c6e&quot; target=&quot;_blank&quot;&gt;SSHの鍵認証設定&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://rundeck.lighthouseapp.com/projects/59277/tickets/345-add-resource&quot; target=&quot;_blank&quot;&gt;Rundeck Development&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/rundeck/rundeck_ssh_error/&quot;&gt;Rundeckでssh接続エラー&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on February 14, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[setVibrateメソッドの使い方]]></title>
 <link rel="alternate" type="text/html" href="/android/notification_compat_builder_setvibrate/" />
  <id>/android/notification_compat_builder_setvibrate</id>
  <published>2016-02-07T19:00:00-05:00</published>
  <updated>2016-02-07T19:00:00-05:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2016年02月07日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[Android SDK]  API 21: Android 5.0(Lollipop)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;実装&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;スマートウォッチ(Android Wear)に通知を送るため、NotificationCompat.Builder の&lt;/p&gt;

&lt;p&gt;setVibrateメソッドを使った際の自分用メモ。&lt;/p&gt;

&lt;p&gt;バイブレーション・パターンの設定は下記仕様ですが、&lt;/p&gt;

&lt;p&gt;long型配列の&lt;font color=&quot;green&quot;&gt;&lt;b&gt;1つ目の要素を除いて、偶数は振動、奇数は休止&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;と覚えておけば良さそうです。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Builder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getApplicationContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 単位はミリ秒&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 要素1 : 振動開始までの時間&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 要素2 : 振動&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 要素3 : 休止&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 要素4 : (これ以降は要素2-3の繰り返し)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setVibrate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;下記の例だと、ツー・ツ・ツ　みたいな感じになります。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// 1秒振動、0.1秒休止、0.1秒振動、0.05秒休止、0.1秒振動&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setVibrate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;関連リンク&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html&quot; target=&quot;_blank&quot;&gt;API : NotificationCompat.Builder&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/android/notification_compat_builder_setvibrate/&quot;&gt;setVibrateメソッドの使い方&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on February 07, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[プログラミング問題A]]></title>
 <link rel="alternate" type="text/html" href="/programming-practice/programming_practice_A/" />
  <id>/programming-practice/programming_practice_A</id>
  <published>2015-12-30T19:00:00-05:00</published>
  <updated>2015-12-30T19:00:00-05:00</updated>
  <author>
    <name>sankame</name>
    <uri></uri>
    <email>m2ad0504@outlook.jp</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;span style=&quot;float:right;&quot;&gt;投稿日：2015年12月30日&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;環境&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;[CentOS]   5.6 (32bit版カーネル) 
[PHP]      5.4.17
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;問題A-1&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;10進数の任意の値をn進数に変換する関数を作成して下さい。(nは1～16の正の整数)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;サンプルはPHP。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;サンプルA-1&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;実行方法&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php changeDecimalToBaseN.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ソース&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/Sankame/87f7b5050a802e5e5710.js&quot;&gt;&lt;/script&gt;&lt;/li&gt;
&lt;/ul&gt;

    &lt;p&gt;&lt;a href=&quot;/programming-practice/programming_practice_A/&quot;&gt;プログラミング問題A&lt;/a&gt; was originally published by sankame at &lt;a href=&quot;&quot;&gt;IT調べものブログ&lt;/a&gt; on December 30, 2015.&lt;/p&gt;
  </content>
</entry>

</feed>
