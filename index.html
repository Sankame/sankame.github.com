<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>OpenX</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>OpenX調査 - 暫定ページ</h1>
        <p>sankame's blog</p>
        <p class="view"><a href="https://github.com/Sankame">View the Project on GitHub <small>Sankame</small></a></p>
        <ul>
          <li class="single"><a href="">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>目的</h3>
<p>
<ol>
<li>現状：SOSによる、期間指定のベタ張り＋imp集計</li>
<li>要望：imp配信、クリック集計、配信の自動最適化(クリエイティブ選択、配信面選択)、etc</li>
<li>対策：商用アドサーバを検討。コスト高。</li>
<li>OSS調査</li>
</ol>
</p>

<h3>着目点</h3>

<p>
<ul>
<li>負荷に耐えられるか？：7億PV/月
	<br>↓
	<br>作りを調査＋ベンチマーク(50imp/ページ)
</li>
<li>何ができるか？：機能洗い出し</li>
</ul>
</p>

<h3>インストール</h3>

<pre>
<a href="http://www.openx.com/docs/qsg-install" style="color:orange;" target="_blank">マニュアルに従ってインストール</a>

以下からソースをDL。
アンケート回答が必須のため、wgetでは落とせない。
Download the latest installation archive from: here

ソースをサーバへアップし、解凍して公開ディレクトリへ配置する。
<code>
mv openx-2.8.10 openx
mv openx /var/www/html/
</code>

/var/www/html/openx/varと/var/www/html/openx/www/images　に777を与える。
<code>
cd /var/www/html/openx/
chmod -R 777 var
chmod -R 777 ./www/images/
</code>

ブラウザでアクセスし、Webのインストーラを起動する。
http://localhost/openx/

※以下のディレクトリにも書き込み権限が必要というエラー。
<code>
/var/www/html/openx/plugins
/var/www/html/openx/www/admin/plugins
</code>

画面にコマンドが書いてあったのでそのまま実行。
<code>
chmod -R a+w /var/www/html/openx/plugins
chmod -R a+w /var/www/html/openx/www/admin/plugins
</code>

-------------------------------
2.Registration
-------------------------------
Webインストーラを続行、以下の項目に入力。

name:
password:
e-mail:


-------------------------------
3.Database
-------------------------------
画面にはDBがなかったら作成されると書いてあったが、エラーになったので
以下のコマンドであらかじめDBとユーザを作成。
(testxxの部分は適当に変更)

<code>
create database testdb;

grant all on testdb.* to 'testuser'@'localhost' identified by 'testpassword';
</code>

-------------------------------
4. Configuration
-------------------------------
Webインストーラを続行、以下の項目に入力。

Admin User:
Admin User Password:


-------------------------------
5. Finish
-------------------------------
エラーが出てるからログを見てね、と書いてあったが、そのままcontinue

※特にエラーは書かれていなかった。
<code>
view /var/www/html/openx/var/install.log
</code>

-------------------------------

そのまま広告設定の管理画面ぽいところへ遷移。

ページ上部に以下のエラーが。
<span>
Warning: date_default_timezone_get(): It is not safe to rely
 on the system's timezone settings.
 You are *required* to use the date.timezone setting or the
 date_default_timezone_set() function.
 In case you used any of those methods and you are still getting
 this warning, you most likely misspelled the timezone identifier.
 We selected 'Asia/Tokyo' for 'JST/9.0/no DST' instead in
 /var/www/html/openx/variables.php on line 82 
</span>

以下のソースに追記する。

■ソース
/var/www/html/openx/variables.php

■追記
//追記ここから
if( ! ini_get('date.timezone') ){
	date_default_timezone_set('Asia/Tokyo');
}
//追記ここまで
	$GLOBALS['serverTimezone'] = date_default_timezone_get();

<a href="http://www.jamescrowley.co.uk/2010/09/12/running-openx-under-iis-with-php-5-3-date-default-timezone-get-errors/" style="color:orange;" target="_blank">参考ページ</a>

</pre>

<p></p>

      </section>
    </div>

    <footer></footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>