<!DOCTYPE html>
<html lang="ja">
<head>
    <title>プログラマー備忘録</title>
    <meta name="generator" content="Hugo 0.55.0" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    
    

    
    
    <meta name="robots" content="noindex">
    

    <script src="https://sankame.github.io/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="https://sankame.github.io/bower_components/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://sankame.github.io/bower_components/bootstrap/js/dropdowns-enhancement.js"></script>
    <script src="https://sankame.github.io/bower_components/bluebird/js/browser/bluebird.js"></script>
    
    
    
    <script src="https://sankame.github.io/bower_components/d3/d3.min.js" charset="utf-8"></script>
    <script src="https://sankame.github.io/bower_components/cal-heatmap/cal-heatmap.min.js"></script>
    <script src="https://sankame.github.io/bower_components/highlightjs/highlight.pack.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>

    <link rel="icon" href="https://sankame.github.io/favicon.ico" />
    <link rel="apple-touch-icon" href="https://sankame.github.io/apple-touch-icon.png" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/highlightjs/styles/monokai.css" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/bootstrap/css/dropdowns-enhancement.css" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/talaria/dist/talaria.css" />   
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/createjs/createjs.css" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/icomoon/css/icomoon.css" />
    <link rel="stylesheet" href="https://sankame.github.io/css/style.css" />
    <link rel="stylesheet" href="https://sankame.github.io/css/mobile.css" />
    <link rel="stylesheet" href="https://sankame.github.io/bower_components/cal-heatmap/cal-heatmap.css" />
    <link rel="stylesheet" href="https://sankame.github.io/css/sankame.css" />

    <link rel="alternate" type="application/rss+xml" title="プログラマー備忘録" href="https://sankame.github.io/index.xml"/>
    <link rel="feed" type="application/rss+xml" title="プログラマー備忘録" href="https://sankame.github.io/index.xml" />

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-7938855665302783",
          enable_page_level_ads: true
     });
</script>
</head>
<body>
<div class="container">


<div id="container">
    

<header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">

	<nav class="navbar navbar-default">
	  <div class="container-fluid">

    	    <div class="navbar-header">
      		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
      		  <span class="sr-only">Toggle navigation</span>
      		  <span class="icon-bar"></span>
      		  <span class="icon-bar"></span>
      		  <span class="icon-bar"></span>
      		</button>
		    <h1>
			    <a class="navbar-brand" href="https://sankame.github.io/">
				    
				    
				    <span class="site-title">プログラマー備忘録</span>
				    
			    </a>
		    </h1>
	    </div>


    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
    
    <li>
	<a href="https://twitter.com/handycola" target="_blank">
		<i class="fa fa-twitter" aria-hidden="true"></i>
	</a>

</li>
<li>
	<a href="https://facebook.com/100014073908728" target="_blank">
		<i class="fa fa-facebook" aria-hidden="true"></i>
	</a>
</li>
<li>
	<a href="https://stackoverflow.com/users/2849068/sankame" target="_blank">
		<i class="fa fa-stack-overflow" aria-hidden="true"></i>
	</a>
</li>
<li>
	<a href="/index.xml" type="application/rss+xml" target="_blank">
		<i class="fa fa-rss-square" aria-hidden="true"></i>
	</a>
</li>

    
      </ul>
    </div>

  </div>
</nav>

</header>




    <div id="top-image">
	<div id="top-image-wrap">
		<iframe src="https://sankame.github.io/bower_components/particlesjs/particlesjs.html"></iframe>
	</div>
</div>

    <div class="outer">

    <section id="main">

    
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2021-11-20-flutter_pub_upgrade_error/" class="permalink">Error: Unable to &#39;pub upgrade&#39; flutter tool.</a>
    </h1>
	<time datetime="2021-11-20 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-11-20</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                    0. 環境 [OS] MacOS 10.11.6
[Flutter] 2.2.3
1. 問題  flutterアプリの修正中に、&rdquo;flutter upgrade&rdquo;を実行したら、いつものコマンドでアプリが起動しなくなってしまいました。
 (いつものコマンド)
flutter run -d chrome --web-port=5000
 (エラー内容)
Error: Unable to 'pub upgrade' flutter tool. Retrying in five seconds
 コンソールいっぱいにエラーメッセージが出ましたが、代表させて上記のみ記載。   ググると同じエラーに関する情報がありました。
 ここに書いてある方法では直らなかったので、flutterを以前のバージョンに戻すことにしました。   2. 対応  flutterを配置している場所を確認。
$ which flutter [path_to_flutter]/flutter/bin/flutter  [path_to_flutter] にあるflutterディレクトリをバックアップとしてリネーム。
 [path_to_flutter] に古いバージョンのflutterをダウンロード。
 前のバージョンのflutter(僕は2.2.3を取得しました)
 OSごとにタブが分かれているので注意。
  ダウンロードしたファイルを解凍し、下記のように元のディレクトリ名と同じになっているか確認。(こうすればPATHの変更も不要)
[path_to_flutter]/flutter/
 任意の場所で下記コマンドを実行。
$ flutter precache $ flutter doctor  最後にアプリのルートで下記を実行。 ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2021-11-20-flutter_pub_upgrade_error/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2021-09-11-mysql_setting_slow_query/" class="permalink">MySQLでSlowQueryLogを有効にする</a>
    </h1>
	<time datetime="2021-09-11 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-09-11</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                    0. 環境 [OS] CentOS 6.10
[MySQL] 5.1
1. 前提  MySQLシステム変数は、SESSIONとGLOBALがあるので注意。
 有効範囲はそれぞれ「SESSIONは接続ごと」「GLOBALはMySQL起動中」というふうに異なります。
 GLOBALスコープで設定した値は、MySQL再起動で消失します。(これを防ぎたい場合、mysql.cnfに直接記載)
 MySQL8からは、SET PERSIST .. とすることで消失を防げる。    2. 接続  MySQLに接続。mysql -u root -p  3. コマンド (SESSIONスコープ)  下記は、SHOW SESSION VARIABLES ..と書いたのと同義。
 現在の値
-- SlowQueryを出力するか？ SHOW VARIABLES LIKE 'slow_query_log'; -- 何秒を超えたらSlowQueryとして出力するか？ SHOW VARIABLES LIKE 'long_query_time'; -- SlowQuery出力先のファイル名 SHOW VARIABLES LIKE 'slow_query_log_file';  更新
SET long_query_time = 3;  (注)slow_query_logとslow_query_log_fileはGLOBALスコープでのみ変更可能。
  4. ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2021-09-11-mysql_setting_slow_query/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2021-08-10-android_app_bundle/" class="permalink">Android App Bundleに対応</a>
    </h1>
	<time datetime="2021-08-10 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-08-10</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                     0. 環境 [OS] Windows 11 Home
[Android Studio] 3.6.3
1. ビルド  期日が迫ってたので、App Bundle対応を行いました。いくつか「あれ？」と思ったので記載しておきます。
 いつものように、Android Studioでメニューから[Build]-[Generate Signed Bundle / APK&hellip;]を選択。
 ビルド用のダイアログで「Android App Bundle」を選択し、[Next]ボタンをクリックすると下記が開きます。

 [Export encryped&hellip;]にチェックを入れ、直下に表示された秘密鍵の保存場所を覚えておきます。(*a)
 [Next]ボタンを押して先に進むと、aabという拡張子のファイルが生成されます。(*b)
   2. アプリ公開  いつものようにブラウザでPlay Consoleを開いて、対象のアプリを選択。
 左メニュー[製品版]-[新しいリリースを作成]をクリックし、[App Bundle]を選択すると下記画面に来ます。

 前述(*a)の登録がまだなので、[オプトイン]リンクをクリック。  
 ここで前述の(*a)をアップロード。  
 そのままこの画面に戻ってきて上記(*b)をアップロードするとエラーが出ました。
app bundle 予期しないエラーが発生しました。もう一度お試しください（40B24C00）。  エラーコードをググっても出てこなかったので、作成中のリリースを一度破棄し、ブラウザを再起動してやり直したらうまくいきました。 (秘密鍵のアップロードはやり直さなくてOKでした)
  あとはいつものように必要項目を入力し、フッター部分のボタンを押していくと公開設定が完了します。しばらく「審査中」の後、無事公開されました。
[保存]　→　[リリースのレビュー] → [製品版としての公開を開始] → 確認ダイアログで[公開]クリック    ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2021-08-10-android_app_bundle/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2021-08-06-windows_update_causes_vm_error/" class="permalink">WindowsUpdate後のVirtualBox起動エラー</a>
    </h1>
	<time datetime="2021-08-06 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-08-06</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                     0. 環境 [OS] Windows 11 Home
[VirtualBox] 6.1.22
1. 問題  1週間くらい前にWindowsUpdateしたら、下記エラーでVMが起動しなくなりました。
仮想マシン&quot;ubuntu_64&quot;のセッションを開けませんでした。 Failed to get device handle and/or partition ID for 00000000027d6520 (hPartitionDevice=0000000000000bd1, Last=0xc0000002/1) (VERR_NEM_VM_CREATE_FAILED). 終了コード : E_FAIL (0x80004005) コンポーネント: ConsoleWrap インターフェース: IConsole {872da645-4a9b-1727-bee2-5585105b9eed}  WindowsUpdate後にUIが変わってたのでたぶん「Windows 11 Insider Preview」のせいだと思います。
 Windowsタスクバーの虫眼鏡マークをクリックし「設定」と入力。 設定画面が開くので左メニューから「Windows Update」をクリックすると履歴が参照可能。   2. 対応  Windowsタスクバーの虫眼鏡マークをクリックし「コントロールパネル」と入力。
 「コントロールパネル」内の「プログラムと機能」をクリック。
 「プログラムと機能」内の左のメニュー「Windowsの機能の有効化または無効化」をクリック。
 下記が開くので、「Windows ハイパーバイザー プラットフォーム」にチェックし、Windowsを再起動したら直りました。(WindowsUpdateでデフォルトのOffに戻ってしまったようです…)

   ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2021-08-06-windows_update_causes_vm_error/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2021-07-25-flutter_local_db/" class="permalink">【Flutter】ローカルDBの選択-Hive-</a>
    </h1>
	<time datetime="2021-07-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-07-25</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                     0. 環境 [OS] MacOS 10.11.6
[Flutter] 2.2.3
[Dart] 2.13.4
1. 背景 React NativeでiOSアプリを作成してたんですが、環境周りの不具合に時間を取られ、肝心の実装がほとんどできない状態が続いてました。 そこで、試しにFlutterをやってみたら、シュミレーターで動かすところまでは比較的楽にできたので乗り換えることにしました。
JSを使えるエンジニアが多いという理由で、React Nativeが支持されるかな？と予想してたのですが、 最近、TwitterなどでReact離れを 見かけることが増えてきて、そろそろ潮時かなと思ってきました。
2. 検討  作成したいアプリがローカルDBを使用しているので、何が良いのかいろいろ見てみました。
 こちらのページがよくまとまってます。  まず、僕の環境で、sqflite、Realm、Moor、ObjectBoxはサンプルアプリすら動かなかったので諦めました。
 作ろうとしてるアプリのAndroid版がSQLite3を使ってるので、sqfliteやそれをラッピングしてるというMoorがいいかなと思ったのですが、下記のエラーが解決できず諦めました。同様のエラーで開発者に対する質問が結構挙がってましたが、いまいち決定的な解決方法はなさそうでした。
Error: MissingPluginException(No implementation found for method getDatabasesPath on channel com.tekartik.sqflite)
  3. Hiveサンプルアプリ  上記ページで紹介されてるHiveがさくっと動きました。
 サンプルページの「Code」ボタンからファイルアイコンをクリックしてURLをコピー。(画像参照)

 適当なディレクトリにソースをダウンロードしてアプリを起動します。
$ git clone https://github.com/hivedb/samples.git $ cd samples/todo/ $ flutter create . $ flutter run  To-Doアプリが起動しました。
  
   ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2021-07-25-flutter_local_db/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2020-07-23-expo_sqlite_db_browsing/" class="permalink">【ReactNative】expo-sqliteのテーブルを開発ツールから参照する方法</a>
    </h1>
	<time datetime="2020-07-23 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-23</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                     0. 環境 [OS] MacOS 10.11.6
[React Native] 0.61.4
[SQLite Studio] 3.2.1
1. 背景 React NativeでiOSアプリを作成中です。 ローカルストレージとしてExpoのSQLiteを使っていますが、開発ツールからテーブル参照する方法が分からず調べてました。 アプリから登録されたレコードの確認など、なにかとこの手のツールは必要です。 Androidアプリ開発のStethoみたいなのがないかなーと思ってましたが、結局こんな感じにしました。
2. 手順(DBファイルの格納先)  expo-sqliteが作成するDBファイルの保存先は${FileSystem.documentDirectory}/SQLite/${name}」なので、まず${FileSystem.documentDirectory}がどこなのか調べます。
 (詳細はこちらのページの&rdquo;SQLite.openDatabase&rdquo;参照)  アプリ実行時に必ず通る箇所にログを仕込みます。(importとconsoleの行だけあればどこでもOK)
import * as FileSystem from 'expo-file-system' class DB { static db; static getDB(){ console.log(&quot;FileSystem; &quot; + FileSystem.documentDirectory); :  コンソールに出力されたパスからfile://を削ったものが${FileSystem.documentDirectory}です。
 さらに上記${name}は、SQLite.openDatabase();の引数で指定しているDB名になります。
  3. 手順(SQLiteStudio)  MacにSQLiteStudioをインストール。
 SQLiteStudioのメニューで[Database]-[Add a database]を選び、上記2で調べたパスを[File]に入力して[OK]をクリック。
  
 左ペインにテーブルが表示されれば成功です。   ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2020-07-23-expo_sqlite_db_browsing/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2020-06-13-android_class_duplicated/" class="permalink">Androidビルド時のクラス重複エラー</a>
    </h1>
	<time datetime="2020-06-13 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-06-13</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                    0. 環境 [Gradle] 5.6.4
1. 問題 こちらの情報を元にFabricからFirebaseへの移行を行いました。
Android プロジェクトに Firebase を追加する
Upgrade to the Firebase Crashlytics SDK
コード修正後、エラーが発生してビルドできず・・・
Duplicate class com.google.android.gms.measurement.AppMeasurement found in modules jetified-firebase-analytics-impl-12.0.1-runtime.jar (com.google.firebase:firebase-analytics-impl:12.0.1) and jetified-play-services-measurement-impl-17.4.3-runtime.jar (com.google.android.gms:play-services-measurement-impl:17.4.3) Duplicate class com.google.android.gms.measurement.AppMeasurement$ConditionalUserProperty found in modules jetified-firebase-analytics-impl-12.0.1-runtime.jar (com.google.firebase:firebase-analytics-impl:12.0.1) and jetified-play-services-measurement-impl-17.4.3-runtime.jar (com.google.android.gms:play-services-measurement-impl:17.4.3) Duplicate class com.google.android.gms.measurement.AppMeasurement$Event found in modules jetified-firebase-analytics-impl-12.0.1-runtime.jar (com.google.firebase:firebase-analytics-impl:12.0.1) and jetified-play-services-measurement-impl-17.4.3-runtime.jar (com.google.android.gms:play-services-measurement-impl:17.4.3) Duplicate class com.google.android.gms.measurement.AppMeasurement$EventInterceptor found in modules jetified-firebase-analytics-impl-12.0.1-runtime.jar (com.google.firebase:firebase-analytics-impl:12.0.1) and jetified-play-services-measurement-impl-17.4.3-runtime.jar (com.google.android.gms:play-services-measurement-impl:17.4.3) Duplicate class com.google.android.gms.measurement.AppMeasurement$OnEventListener found in modules jetified-firebase-analytics-impl-12.0.1-runtime.jar (com. ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2020-06-13-android_class_duplicated/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2020-05-05-laravel_phpunit_mockery/" class="permalink">品質管理とUnitTest(Laravel&#43;PHPUnit&#43;Mockeryによるサンプルコード付き)</a>
    </h1>
	<time datetime="2020-05-05 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-05-05</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                    環境 [OS] Debian 10
[PHP] 7.3.13
[Laravel] 7.6.2
[PHPUnit] 8.5.3
[Mockery] 1.3.1
はじめに ソフトウェアやアプリケーション開発にとって品質管理は切っても切り離せない存在です。 日本の従来の品質管理は散布図やPB曲線などを用いて定量化を重視してきました。
しかし、それらは品質を数値化し分析することに寄りすぎていると感じるのは僕だけでしょうか？ 品質管理の本来の目的は「品質を上げること」にあるはずです。
一言で品質と言っても様々ですが、「品質 = 要求仕様に則った実装」と定義すると、品質向上のための必要十分な施策はUnitTestによるホワイトボックステストが一番の近道だと考えています。 実際、ネットの情報を見ても、Googleなどのテック企業はUnitTestを中心に据えているように見えます。 その上で、報告などの目的でどうしても品質を定量化したいのであれば、UnitTestのカバレッジ計測ツールを使ったら良いのではないでしょうか。
1. 方針 下記の方針でユニットテストを書いていきますが、自分のプロジェクトと合わない部分は変えて下さい。
 1-1. 後々CIで動かすことも考慮し、DB接続はモックで代替する。 1-2. フレームワークを含めず実装した箇所だけのテストコードを書く。 1-3. プロダクションコードの全ロジックを通すテストコードを書く。(「3. テスト記載方法」で後述) 1-4. 上記1-2の範囲でツールを用いてカバレッジを計測し、なるべく100%に近づける。(一般的にツールは評価が甘めのため) 1-5. テストコードの構成はフレームワークやデファクトスタンダードに合わせる。  2. 設定 2-1. PHPUnit  LaravelにはPHPUnitが最初から入ってるので、アプリのルートで下記コマンドを実行するとサンプルのテストコードが実行されます。
composer exec -v phpunit  アプリルートにあるtestsディレクトリにテストコードを格納していきます。同ディレクトリ内はさらにFeatureとUnitに分かれてます。
tests |-- CreatesApplication.php |-- Feature | `-- ExampleTest.php |-- TestCase.php `-- Unit `-- ExampleTest.php   Laravelの方針に合わせて、下記の区分けでテストを書いていきます。
 Feature ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2020-05-05-laravel_phpunit_mockery/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2020-04-30-virtualbox_share_folder/" class="permalink">VirtualBoxでWindows10とUbuntu間のファイル共有</a>
    </h1>
	<time datetime="2020-04-30 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-04-30</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                    0. 環境 [VirtualBox] 6.1.6
[ホストOS] Windows 10 Home
[ゲストOS] Ubuntu 16.4
1. やりたいこと Windows10(ホストOS)にVirtualBoxを入れて、その上でUbuntu(ゲストOS)を動かします。
その際、ホストOS上のファイルをゲストOSからも操作したい。
IDEやエディタはホストOS上で起動し、バージョン管理やWebサーバー経由の確認などはゲストOSで行いたいというのが意図です。
2. インストール VirtualBoxとUbuntuのインストール&amp;設定はこの記事が分かりやすかったです。
VirtualBoxのサイトで下記リンクからダウンロード。
[VirtualBox 6.1.6 platform packages]-[Windows hosts]
また、Ubuntuはこちらのサイトから「64-bit PC (AMD64) desktop image」をダウンロードしました。
1.6Gあるので僕の環境だと数時間かかりました。
3. 共有フォルダ設定 Ubuntuのインストールが終わったら、VirtualBoxのホーム画面からインストールした仮想マシンを選択して「設定」をクリック。
下記のウィンドウが起動するので、左メニューの「共有フォルダー」をクリックします。
さらに右端にあるプラスマークをクリック。 
下記ウィンドウに必要項目を入力します。
・「フォルダーのパス」は「その他」を選んで、ホストOS側で共有したいフォルダーを選択。 ・「フォルダー名」は自動で入るのでさわらず。(1) ・「自動マウント」をチェックONにします。 ・「マウントポイント」はゲストOSの任意のディレクトリを指定。(2) ・「永続化する」というチェックボックスがある場合、それもON。  
こんな感じに追加されました。 
ゲストOSを再起動します。
これだけだとゲストOSからホストOSの共有フォルダが見えませんでした。
調べてるといろんなページで「Ubuntuに&rdquo;Gust Additions&rdquo;をインストールする必要がある」と書いてましたが、入れなくても後述の手順でできました。 (以前はそうだったのかもしれません)
&ldquo;mount.vboxsf&rdquo;コマンドを使いたいので、ゲストOS上でrootになるかsudoをつけて下記コマンドを実行。
# apt install virtualbox-guest-utils  次にゲストOS側で予めマウントポイントのディレクトリを作成しておきます。(上記(2))
最後に、第一引数に前述の(1)、第二引数に(2)を指定してこのコマンドを実行するとホスト側のフォルダが参照できました。(下記のshareは読み替えて下さい)
# mount.vboxsf share /share  仮想マシンを落とすと設定が消えてしまったので、~/.bashrcに上記コマンドを書いておきました。 ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2020-04-30-virtualbox_share_folder/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    
    <article class="article article-type-post" itemscope="" itemprop="blogPost">

	    <div class="article-inner">

            
            </a>

            <header class="article-header">
    
    <h1 class="article-title" itemprop="name">
	<a href="https://sankame.github.io/blog/2020-04-01-mysql8_not_support_querycache/" class="permalink">MySQLでquery_cache系パラメータを設定すると起動エラー</a>
    </h1>
	<time datetime="2020-04-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-04-01</time>
    <div class="article-meta">

        
    </div>
</header>


            <div class="article-entry" itemprop="articleBody">
                <p>
                    0. 環境 [MySQL] 8.0.17
1. 経緯  GCP無料枠のメモリ約500MBという貧弱な環境でWordPressを運用してます。
少しでもパフォーマンス改善したく、MySQLのクエリキャッシュを設定しました。(下記要点のみ記載)
# vim /etc/my.cnf.d/mysql-server.cnf : : [mysqld] query_cache_type=1 query_cache_limit=1M query_cache_size=20M  MySQLを再起動。
# mysql -u hoge -phoge -e&quot;SET GLOBAL innodb_fast_shutdown = 1&quot; # service mysqld stop # service mysqld start  起動しなくなりました…
ログを見ると下記エラーが出てました。(要点のみ記載)
# tail -F /var/log/mysql/mysqld.log : : [Server] unknown variable 'query_cache_type=1'.   2. 対応  ネットで情報を漁ったところ、MySQL8からはクエリキャッシュが使えなくなったようです。
MySQL 8.0: Retiring Support for the Query Cache
代わりにProxySQLというのが紹介されてましたが、ミドルウェアを追加するとメンテするポイントも増えるので今回は見送りました。
一旦は、WordPressのプラグイン(WP Super Cache)とphp-fpmのチューニングで、DBより手前で何とかする方向で進めます。 ...
                </p>
                <p class="article-more-link">
                    <a href="https://sankame.github.io/blog/2020-04-01-mysql8_not_support_querycache/">
			    Read more
			    
                    </a>
                </p>
            </div>
	    
        </div>
    </article>
    

    <nav id="page-nav">

    
        <a class="extend prev" rel="prev" href="/">
            « 
        </a>
    
    
        <a class="extend next" rel="next" href="/page/3/">
             »
        </a>
    

</nav>

</section>


    
<aside id="sidebar">
    

<div class="widget-wrap">
    <div class="widget">
        <ul id="recent-post">
		<li id="first-recent"><a href="/index.xml" id="firstmove" class="move"><h3 class="widget-title">
			最近の投稿
    </h3></a></li>
    		
            
<li><a href="https://sankame.github.io/blog/2024-06-11-git_push_errors/" class="move">  大量ファイルをgit pushする際のエラー回避3パターン</a> </li>
            
<li><a href="https://sankame.github.io/blog/2024-02-23-view_sqlite_on_androidstudio/" class="move">  AndroidStudioでSQLiteを扱う</a> </li>
            
<li><a href="https://sankame.github.io/blog/2024-02-18-admob_alert_contents_over_ads/" class="move">  AdMob広告にコンテンツが被ったという警告を回避</a> </li>
            
        </ul>
    </div>
</div>



    

<div class="widget-wrap">
    <div class="widget">
        <ul class="category-list">
    <h3 class="widget-title">Categories </h3>
            
                <a class="category-list-link" href="https://sankame.github.io/categories/tips">
            <li class="category-list-item">
                    tips
                <span class="category-list-count">28</span>
            </li>
                </a>
            
                <a class="category-list-link" href="https://sankame.github.io/categories/%e3%82%a8%e3%83%a9%e3%83%bc%e8%a7%a3%e6%b1%ba">
            <li class="category-list-item">
                    エラー解決
                <span class="category-list-count">32</span>
            </li>
                </a>
            
                <a class="category-list-link" href="https://sankame.github.io/categories/%e3%82%bb%e3%83%83%e3%83%88%e3%82%a2%e3%83%83%e3%83%97">
            <li class="category-list-item">
                    セットアップ
                <span class="category-list-count">42</span>
            </li>
                </a>
            
                <a class="category-list-link" href="https://sankame.github.io/categories/%e3%83%81%e3%83%a5%e3%83%bc%e3%83%8b%e3%83%b3%e3%82%b0">
            <li class="category-list-item">
                    チューニング
                <span class="category-list-count">3</span>
            </li>
                </a>
            
                <a class="category-list-link" href="https://sankame.github.io/categories/%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0">
            <li class="category-list-item">
                    プログラミング
                <span class="category-list-count">7</span>
            </li>
                </a>
            
        </ul>
    </div>
</div>



    

<div class="widget-wrap">
	<ul class="category-list">
    <h3 class="widget-title">Tags  </h3>
    <div class="widget tagcloud">
    	
        
        <a href="https://sankame.github.io/tags/ab" style="font-size: 12px;">ab</a>
        
        <a href="https://sankame.github.io/tags/admob" style="font-size: 12px;">admob</a>
        
        <a href="https://sankame.github.io/tags/android" style="font-size: 12px;">android</a>
        
        <a href="https://sankame.github.io/tags/androidstudio" style="font-size: 12px;">androidstudio</a>
        
        <a href="https://sankame.github.io/tags/androidwear" style="font-size: 12px;">androidwear</a>
        
        <a href="https://sankame.github.io/tags/angular2" style="font-size: 12px;">angular2</a>
        
        <a href="https://sankame.github.io/tags/apache" style="font-size: 12px;">apache</a>
        
        <a href="https://sankame.github.io/tags/apachebench" style="font-size: 12px;">apachebench</a>
        
        <a href="https://sankame.github.io/tags/apex" style="font-size: 12px;">apex</a>
        
        <a href="https://sankame.github.io/tags/applewatch" style="font-size: 12px;">applewatch</a>
        
        <a href="https://sankame.github.io/tags/bash" style="font-size: 12px;">bash</a>
        
        <a href="https://sankame.github.io/tags/bitbucket" style="font-size: 12px;">bitbucket</a>
        
        <a href="https://sankame.github.io/tags/centos" style="font-size: 12px;">centos</a>
        
        <a href="https://sankame.github.io/tags/cocoapods" style="font-size: 12px;">cocoapods</a>
        
        <a href="https://sankame.github.io/tags/composer" style="font-size: 12px;">composer</a>
        
        <a href="https://sankame.github.io/tags/cron" style="font-size: 12px;">cron</a>
        
        <a href="https://sankame.github.io/tags/dell" style="font-size: 12px;">dell</a>
        
        <a href="https://sankame.github.io/tags/eclipse" style="font-size: 12px;">eclipse</a>
        
        <a href="https://sankame.github.io/tags/fitbit" style="font-size: 12px;">fitbit</a>
        
        <a href="https://sankame.github.io/tags/flutter" style="font-size: 12px;">flutter</a>
        
        <a href="https://sankame.github.io/tags/freemind" style="font-size: 12px;">freemind</a>
        
        <a href="https://sankame.github.io/tags/git" style="font-size: 12px;">git</a>
        
        <a href="https://sankame.github.io/tags/github" style="font-size: 12px;">github</a>
        
        <a href="https://sankame.github.io/tags/googlesheets" style="font-size: 12px;">googlesheets</a>
        
        <a href="https://sankame.github.io/tags/gradle" style="font-size: 12px;">gradle</a>
        
        <a href="https://sankame.github.io/tags/gulp" style="font-size: 12px;">gulp</a>
        
        <a href="https://sankame.github.io/tags/hive" style="font-size: 12px;">hive</a>
        
        <a href="https://sankame.github.io/tags/hugo" style="font-size: 12px;">hugo</a>
        
        <a href="https://sankame.github.io/tags/java" style="font-size: 12px;">java</a>
        
        <a href="https://sankame.github.io/tags/javascript" style="font-size: 12px;">javascript</a>
        
        <a href="https://sankame.github.io/tags/jekyll" style="font-size: 12px;">jekyll</a>
        
        <a href="https://sankame.github.io/tags/jenkins" style="font-size: 12px;">jenkins</a>
        
        <a href="https://sankame.github.io/tags/jqgrid" style="font-size: 12px;">jqgrid</a>
        
        <a href="https://sankame.github.io/tags/kitura" style="font-size: 12px;">kitura</a>
        
        <a href="https://sankame.github.io/tags/laravel" style="font-size: 12px;">laravel</a>
        
        <a href="https://sankame.github.io/tags/letsencrypt" style="font-size: 12px;">letsencrypt</a>
        
        <a href="https://sankame.github.io/tags/mecab" style="font-size: 12px;">mecab</a>
        
        <a href="https://sankame.github.io/tags/mindmapmemo" style="font-size: 12px;">mindmapmemo</a>
        
        <a href="https://sankame.github.io/tags/mockery" style="font-size: 12px;">mockery</a>
        
        <a href="https://sankame.github.io/tags/monit" style="font-size: 12px;">monit</a>
        
        <a href="https://sankame.github.io/tags/mysql" style="font-size: 12px;">mysql</a>
        
        <a href="https://sankame.github.io/tags/nextjs" style="font-size: 12px;">nextjs</a>
        
        <a href="https://sankame.github.io/tags/nexus7" style="font-size: 12px;">nexus7</a>
        
        <a href="https://sankame.github.io/tags/nginx" style="font-size: 12px;">nginx</a>
        
        <a href="https://sankame.github.io/tags/node.js" style="font-size: 12px;">node.js</a>
        
        <a href="https://sankame.github.io/tags/npm" style="font-size: 12px;">npm</a>
        
        <a href="https://sankame.github.io/tags/ntp" style="font-size: 12px;">ntp</a>
        
        <a href="https://sankame.github.io/tags/openx" style="font-size: 12px;">openx</a>
        
        <a href="https://sankame.github.io/tags/phalcon" style="font-size: 12px;">phalcon</a>
        
        <a href="https://sankame.github.io/tags/php" style="font-size: 12px;">php</a>
        
        <a href="https://sankame.github.io/tags/phpdebugbar" style="font-size: 12px;">phpdebugbar</a>
        
        <a href="https://sankame.github.io/tags/phpunit" style="font-size: 12px;">phpunit</a>
        
        <a href="https://sankame.github.io/tags/programming-practice" style="font-size: 12px;">programming-practice</a>
        
        <a href="https://sankame.github.io/tags/reactnative" style="font-size: 12px;">reactnative</a>
        
        <a href="https://sankame.github.io/tags/redis" style="font-size: 12px;">redis</a>
        
        <a href="https://sankame.github.io/tags/reviveadserver" style="font-size: 12px;">reviveadserver</a>
        
        <a href="https://sankame.github.io/tags/ruby" style="font-size: 12px;">ruby</a>
        
        <a href="https://sankame.github.io/tags/rubygems" style="font-size: 12px;">rubygems</a>
        
        <a href="https://sankame.github.io/tags/rundeck" style="font-size: 12px;">rundeck</a>
        
        <a href="https://sankame.github.io/tags/selenium" style="font-size: 12px;">selenium</a>
        
        <a href="https://sankame.github.io/tags/shell" style="font-size: 12px;">shell</a>
        
        <a href="https://sankame.github.io/tags/smarty" style="font-size: 12px;">smarty</a>
        
        <a href="https://sankame.github.io/tags/sqlite" style="font-size: 12px;">sqlite</a>
        
        <a href="https://sankame.github.io/tags/ssh" style="font-size: 12px;">ssh</a>
        
        <a href="https://sankame.github.io/tags/ssl-tls" style="font-size: 12px;">ssl-tls</a>
        
        <a href="https://sankame.github.io/tags/stetho" style="font-size: 12px;">stetho</a>
        
        <a href="https://sankame.github.io/tags/subversion" style="font-size: 12px;">subversion</a>
        
        <a href="https://sankame.github.io/tags/swift" style="font-size: 12px;">swift</a>
        
        <a href="https://sankame.github.io/tags/touchpad" style="font-size: 12px;">touchpad</a>
        
        <a href="https://sankame.github.io/tags/typescript" style="font-size: 12px;">typescript</a>
        
        <a href="https://sankame.github.io/tags/ubuntu" style="font-size: 12px;">ubuntu</a>
        
        <a href="https://sankame.github.io/tags/unittest" style="font-size: 12px;">unittest</a>
        
        <a href="https://sankame.github.io/tags/vagrant" style="font-size: 12px;">vagrant</a>
        
        <a href="https://sankame.github.io/tags/vbscript" style="font-size: 12px;">vbscript</a>
        
        <a href="https://sankame.github.io/tags/virtualbox" style="font-size: 12px;">virtualbox</a>
        
        <a href="https://sankame.github.io/tags/vscode" style="font-size: 12px;">vscode</a>
        
        <a href="https://sankame.github.io/tags/website-optimization" style="font-size: 12px;">website-optimization</a>
        
        <a href="https://sankame.github.io/tags/wget" style="font-size: 12px;">wget</a>
        
        <a href="https://sankame.github.io/tags/windows" style="font-size: 12px;">windows</a>
        
        <a href="https://sankame.github.io/tags/xcode" style="font-size: 12px;">xcode</a>
        
        <a href="https://sankame.github.io/tags/%e3%83%97%e3%83%ad%e3%82%b8%e3%82%a7%e3%82%af%e3%82%bf%e3%83%bc" style="font-size: 12px;">プロジェクター</a>
        
        <a href="https://sankame.github.io/tags/%e5%93%81%e8%b3%aa%e7%ae%a1%e7%90%86" style="font-size: 12px;">品質管理</a>
        
    </div>
</ul>
</div>



    <br>
    


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-7938855665302783"
     data-ad-slot="7089480753"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


</aside>


    </div>
</div>

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">

	<footer id="footer-left">
	    &copy; 2024 Webプログラマー <a href="/about" target="_blank">Sankame.</a> <br>
	    Powered by <a href="//gohugo.io">Hugo</a>. Theme by <a href="https://github.com/syui/hugo-theme-wave">hugo-theme-wave</a>.
	</footer>

    </div>
  </div>
</footer>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37675354-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
