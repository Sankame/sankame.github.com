<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>最近の投稿 &#8211; テキストブログ</title>
<meta name="description" content="IT系の調べ物を思い出すためのブログです。">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/abstract-1.jpg">

<meta name="twitter:title" content="最近の投稿">
<meta name="twitter:description" content="IT系の調べ物を思い出すためのブログです。">
<meta name="twitter:creator" content="@handycola">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="最近の投稿">
<meta property="og:description" content="IT系の調べ物を思い出すためのブログです。">
<meta property="og:url" content="/page3/index.html">
<meta property="og:site_name" content="テキストブログ">





<link rel="canonical" href="/page3/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="テキストブログ Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/ext.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">投稿</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">全ての投稿</a></li>
				<li><a href="/tags/">タグ</a></li>
			</ul>
		</li>
		<li>
			<a href="#">運営者</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="sankame photo" class="author-photo">
					<h4>sankame</h4>
					<p>老舗ネット企業で働くプログラマー。<br>千葉県在住。</p>
				</li>
				<!-- <li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li> -->
				<li>
					<a href="mailto:m2ad0504@outlook.jp"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/handycola" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				
				<li>
					<a href="http://github.com/Sankame" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				<li>
					<a href="http://stackoverflow.com/users/2849068/sankame" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> Stackoverflow</a>
				</li>

				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		
	    
	        
	    
	    <!-- <li><a href="/theme-setup/" >Theme Setup</a></li> -->
	  
	    
	        
	        
	    <!-- <li><a href="http://mademistakes.com" target="_blank">External Link</a></li> -->
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/abstract-1.jpg" alt="最近の投稿">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>テキストブログ</h1>
      <h2>最近の投稿</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-07-02T20:00:00-04:00"><a href="/wget/wget_option_O/">July 02, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About sankame">sankame</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/wget/wget_option_O/" rel="bookmark" title="wget ファイル名を指定してダウンロード" itemprop="url">wget ファイル名を指定してダウンロード</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="float:right;">投稿日：2014年07月02日</span></p>

<h5>-O オプションを使って、ダウンロードファイル名を指定します。</h5>

<ul>
<li>下記例では MyWget という名前に変更。</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">    # wget -O MyWget http://ftp.gnu.org/gnu/wget/wget-1.15.tar.gz
    # ls
    # -rw-r--r--  1 root  root  3417936  1月 19 19:17 MyWget
</code></pre></div>
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-06-24T20:00:00-04:00"><a href="/ntp/ntp_for_dev/">June 24, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About sankame">sankame</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/ntp/ntp_for_dev/" rel="bookmark" title="開発環境用 NTP 設定" itemprop="url">開発環境用 NTP 設定</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="float:right;">投稿日：2014年06月24日</span></p>

<h5>0.環境</h5>
<div class="highlight"><pre><code class="language-text" data-lang="text">  [VMware Player] 3.0.0
  [CentOS]        5.6 (32bit版カーネル) (Windows上でゲストOSとして使用)
  [NTP]           4.2.6
</code></pre></div>
<h5>1.セットアップ</h5>

<ul>
<li><p>ソース取得</p>

<p>任意のディレクトリにNTPのソース(ntpd)をダウンロード。</p></li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">    # cd /usr/local/src/
    # wget http://www.eecis.udel.edu/~ntp/ntp_spool/ntp4/ntp-4.2/ntp-4.2.6p5.tar.gz
</code></pre></div>
<ul>
<li>インストール</li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">    # tar xzf ntp-4.2.6p5.tar.gz
    # cd ntp-4.2.6p5
    # ./configure
    # make
    # make install
</code></pre></div>
<ul>
<li><p>設定</p>

<p>下記URL①の設定を行ったところうまく時刻同期されませんでした。</p>

<p>(VMwareをサスペンドすると時刻が離れ過ぎるため？)</p>

<p>結局、自分用の開発環境で、ログイン時に1回同期させれば十分なので下記のようにしました。</p></li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">    # echo &#39;ntpdate -u ntp.nict.jp&#39; &gt;&gt; ~/.bash_profile
</code></pre></div>
<h5>2.参考URL</h5>

<ul>
<li><p><a href="http://www.ipa.go.jp/security/awareness/administrator/secure-web/chap4/4_ntpd.html" target="_blank">①ntpdのインストールと設定</a></p></li>
<li><p><a href="http://www.turbolinux.co.jp/products/server/11s/user_guide/x6278.html" target="_blank">②ntpd の起動と動作確認</a></p></li>
<li><p><a href="http://tech.n-linux.com/index.php?%A5%C6%A5%AF%A5%CB%A5%AB%A5%EB%A5%CE%A1%BC%A5%C8%2FNTP%2FNTP%20%A5%B7%A5%EA%A1%BC%A5%BA%20%A5%D1%A1%BC%A5%C8%203%20ntpdate%20%A5%B3%A5%DE%A5%F3%A5%C9%A4%CB%A4%C4%A4%A4%A4%C6" target="_blank">③ntpdate コマンドについて</a></p></li>
<li><p><a href="http://wiki.nothing.sh/page/NTP/%BF%E4%BE%A9%B8%F8%B3%AB%A5%B5%A1%BC%A5%D0" target="_blank">④推奨公開サーバ</a></p></li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-06-20T20:00:00-04:00"><a href="/github/github_to_bitbucket/">June 20, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About sankame">sankame</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/github/github_to_bitbucket/" rel="bookmark" title="GithubからBitbucketへソース移行" itemprop="url">GithubからBitbucketへソース移行</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="float:right;">投稿日：2014年06月20日</span></p>

<h5>0.環境</h5>
<div class="highlight"><pre><code class="language-text" data-lang="text">  [CentOS]   5.6 (32bit版カーネル)
  [Git]      1.9.4
</code></pre></div>
<h5>1.ダウンロード</h5>

<ul>
<li><p>Githubのソース取得</p>

<p><a href="/assets/posts/img/github_to_bitbucket/1.github.png" target="_blank"><img width="50%" height="50%" title="githubリポジトリ" alt="githubリポジトリ" src="/assets/posts/img/github_to_bitbucket/1.github.png"></a></p>

<p>任意のディレクトリへ移動。</p>

<p>GitHubのリポジトリから対象ソースを取得。(上図の画面右下がURL)</p>

<p><code># git clone git@github.com:Sankame/repo-of-github.git</code></p>

<p>取得したソースの第1階層へ移動。</p>

<p><code># cd repo-of-github/</code></p></li>
<li><p>Bitbucketへソースアップ</p>

<p>予めBitbucket上で任意のリポジトリを作っておきます。</p>

<p><a href="/assets/posts/img/github_to_bitbucket/2.bitbucket_make_repo.png" target="_blank"><img width="50%" height="50%" title="bitbucketリポジトリ作成" alt="bitbucketリポジトリ作成" src="/assets/posts/img/github_to_bitbucket/2.bitbucket_make_repo.png"></a></p>

<p>空のリポジトリができました。</p>

<p><a href="/assets/posts/img/github_to_bitbucket/3.bitbucket_new_repo.png" target="_blank"><img width="50%" height="50%" title="bitbucket新規リポジトリ" alt="bitbucket新規リポジトリ" src="/assets/posts/img/github_to_bitbucket/3.bitbucket_new_repo.png"></a></p>

<p>上記で GitHub から取得したソースは origin がGitHubになっているので、 Bitbucket へ変更。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># git remote -v
 origin  git@github.com:Sankame/repo-of-github.git (fetch) 
 origin  git@github.com:Sankame/repo-of-github.git (push)

 # git remote rm origin
 # git remote add origin git@bitbucket.org:Sankame/repo-of-bitbucket.git
 # git push -u origin --all # pushes up the repo and its refs for the first time
 # git push -u origin --tags # pushes up any tags
</code></pre></div>
<p>GithubのソースがBitbucketへ取り込まれました。</p>

<p><a href="/assets/posts/img/github_to_bitbucket/4.bitbucket_imported_repo.png" target="_blank"><img width="50%" height="50%" title="bitbucket取り込んだソース" alt="bitbucket取り込んだソース" src="/assets/posts/img/github_to_bitbucket/4.bitbucket_imported_repo.png"></a></p>

<p><code>※上記 &quot;git remote add origin&quot; でプロトコルにhttpsを指定していて、&quot;git push&quot; で下記エラーが出た場合は下記の「2.git pushが動かない場合」参照。</code></p>

<p><code>fatal: Unable to find remote helper for &#39;https&#39;</code></p></li>
</ul>

<h5>2.git pushが動かない場合</h5>

<ul>
<li><p>Gitをhttpsへ対応させる</p>

<p>下記URLを見るとcurl-develがないのが原因と書いてあったが、自分の環境には既に入っていたので、</p>

<p>gitを再コンパイル＆インストールしたところうまくいきました。</p>

<p><a href="http://clavier.hatenablog.com/entry/2013/05/18/204050" target="_blank">CentOSに最新のgitをインストールする</a></p>

<p>※gitのソースが手元にある場合は再取得しなくてもOKです。</p>

<p>※rootで操作しているのでインストール時にprefix指定</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># wget https://www.kernel.org/pub/software/scm/git/git-1.9.4.tar.gz
 # tar xzf git-1.9.4.tar.gz
 # cd git-1.9.4
 # ./configure
 # make clean
 # make
 # make prefix=/usr install
</code></pre></div></li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-06-06T20:00:00-04:00"><a href="/apachebench/apache_bench/">June 06, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About sankame">sankame</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/apachebench/apache_bench/" rel="bookmark" title="ポイントだけ ApacheBench" itemprop="url">ポイントだけ ApacheBench</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="float:right;">投稿日：2014年06月06日</span></p>

<h5>0.環境</h5>
<div class="highlight"><pre><code class="language-text" data-lang="text">  [CentOS]      5.6 (32bit版カーネル)
  [Apache]      2.2.3
  [ApacheBench] 2.0.40-dev
</code></pre></div>
<h5>1.基本</h5>

<ul>
<li><p>実行</p>

<p>Apacheをインストールすると ab というコマンドで負荷テストが行えます。</p>

<p>主に使うのは2つのオプションで、下記のように実行します。</p>

<p>後述の &quot;Requests per second&quot; が十分な値になるよう、n と c の値を増やして負荷をかけます。</p>

<p>(n : リクエスト数　c : 同時接続数)</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ab -n 10000 -c 100 &quot;http://test.vm/test.php&quot;
</code></pre></div>
<p>※abでテストできるのはサーバ側の処理だけなので、HTMLレンダリングやJavascript実行等、</p>

<p>　トータルの計測を行いたい場合は、下記のようなツールを検討して下さい。</p>

<p><a href="http://gtmetrix.com/">GTmetrix</a></p>

<p><a href="http://knowledge.sakura.ad.jp/tech/1599/">PageSpeed</a></p></li>
<li><p>結果</p>

<p>下記のような実行結果が表示されるので、主に2つの項目を確認します。</p>

<ul>
<li><p>Failed requests (失敗したリクエスト数)</p>

<p>この項目が0であることを確認します。</p>

<p>但し、表示毎にHTMLのバイト数が異なるサイトの場合、ここがカウントされ、さらに内訳を表す &quot;Length:&quot; もカウントされます。</p>

<p>(1つ前の結果とHTMLのバイト数を比較し、異なる場合は Length がカウントされる仕様)</p>

<p>上記のようなサイトの場合、&quot;Failed requests&quot; に数字があっても、全て Length が原因ならば無視してかまいませんが、</p>

<p>念のため、Apacheのアクセスログを確認し、HTTP Response Code が全て200になっていることを確認して下さい。</p></li>
<li><p>Requests per second (秒間に処理したリクエスト数)</p>

<p>対象WEBサイトのアクセス数などから算出した基準を達成しているか確認します。</p>

<p>(例) 月間 1億 PVのサイトの場合、アクセスが均等という前提で、秒間 38.5 リクエストは達成する必要がありそうです。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">100,000,000 / 30 / 24 / 60 / 60 ≒ 38.5
</code></pre></div>
<p><code>(注意) 下記 &quot;ab 実行結果&quot; は文字を表示するだけのページなので &quot;Requests per second&quot; はかなり高い数字になっています。</code></p></li>
<li><p>ab 実行結果</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># ab -n 10000 -c 100 &quot;http://test.vm/test.php&quot;

This is ApacheBench, Version 2.0.40-dev &lt;$Revision: 1.146 $&gt; apache-2.0
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright 2006 The Apache Software Foundation, http://www.apache.org/

Benchmarking test.vm (be patient)
Completed 1000 requests
Completed 2000 requests
Completed 3000 requests
Completed 4000 requests
Completed 5000 requests
Completed 6000 requests
Completed 7000 requests
Completed 8000 requests
Completed 9000 requests
Finished 10000 requests

Server Software:        Apache/2.2.3
Server Hostname:        test.vm
Server Port:            80

Document Path:          /test.php
Document Length:        80 bytes

Concurrency Level:      100
Time taken for tests:   5.772060 seconds
Complete requests:      10000
Failed requests:        9899
   (Connect: 0, Length: 9899, Exceptions: 0)
Write errors:           0
Total transferred:      2418216 bytes
HTML transferred:       499081 bytes
Requests per second:    1732.48 [#/sec] (mean)
Time per request:       57.721 [ms] (mean)
Time per request:       0.577 [ms] (mean, across all concurrent requests)
Transfer rate:          409.04 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.3      0       6
Processing:     5   56 112.2     55    5769
Waiting:        5   54  77.3     55    4398
Total:          5   57 112.2     55    5769

Percentage of the requests served within a certain time (ms)
  50%     55
  66%     56
  75%     58
  80%     59
  90%     62
  95%     69
  98%     77
  99%    284
 100%   5769 (longest request)
</code></pre></div></li>
</ul></li>
</ul>

<h5>2.応用</h5>

<ul>
<li><p>コマンドサンプル</p>

<p>他によく使うオプションを記載しておきます。</p>

<p>Cookieを指定。(C : [Cookie名]=[値])</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ab -n 100 -c 10 -C &#39;id=test&#39; &quot;http://test.vm/test.php&quot;
</code></pre></div>
<p>複数のCookieを指定。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ab -n 100 -c 10 -C &#39;id=test;flag=1&#39; &quot;http://test.vm/test.php&quot;
</code></pre></div></li>
<li><p>host名の指定が必要な場合</p>

<p>host名の指定が必須のWEBサイトで、かつ ab 実行環境で /etc/hosts に記載ができない場合、</p>

<p>下記のようにヘッダオプション(-H) と Host を使います。</p>

<p>これに対応した ab はApache 2.2.22 以降で、自分の環境は未対応だったのでソースを落としてきてビルドしました。</p>

<p><code>(注意) ab を使うだけなので、Apacheのインストール(make install)は行わない。</code></p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># cd /usr/local/src/
# wget http://ftp.meisei-u.ac.jp/mirror/apache/dist//httpd/httpd-2.2.27.tar.gz
# tar xzf httpd-2.2.27.tar.gz
# cd httpd-2.2.27
# ./configure
# make
# 
# /usr/local/src/httpd-2.2.27/support/ab -n 100 -c 10 -H &#39;Host: test.vm&#39; &quot;http://192.168.130.130/test.php&quot;
#
# /usr/local/src/httpd-2.2.27/support/ab -V
#This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;
</code></pre></div></li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-06-03T20:00:00-04:00"><a href="/selenium/jenkins_selenium/">June 03, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About sankame">sankame</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/selenium/jenkins_selenium/" rel="bookmark" title="Jenkins から Seleniumを動かしてみる" itemprop="url">Jenkins から Seleniumを動かしてみる</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="float:right;">投稿日：2014年06月03日</span></p>

<h3>0.環境</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">・親ノード端末
  [CentOS]   5.6 (32bit版カーネル)
  [ruby]     2.1.1p76
  [rvm]      1.25.25
  [java]     1.7.0_51
  [Jenkins]  1.562

・子ノード端末
  [Windows]  Vista Home Premium (32bit)
  [java]     1.7.0_51
  [IE]       8
</code></pre></div>
<h3>1.準備</h3>

<ul>
<li><p>Jenkinsインストール</p>

<p>下記のリンクを参考にJenkinsをインストールしました。</p>

<p><a href="http://d.hatena.ne.jp/katsuren/20121030/1351569655">俺の成長日記</a></p>

<p><a href="http://oscasierra.net/2013/05/jenkins-to-redhat/">OSCALOG</a></p>

<p><a href="http://kohkimakimoto.hatenablog.com/entry/2013/11/22/192646">JenkinsをCentOSにインストールしたときのメモ</a></p></li>
<li><p>前回の続き</p>

<p>親ノードと子ノードでSelenium Serverを起動します。(下記リンク参照)</p>

<p><a href="/Selenium/2014/05/24/selenium_webdriver/">Selenium WebDriverを動かしてみる</a></p>

<p>前回と異なる点は、Jenkinsがポート4444を使っていたので、Selenium Serverは4445を使って起動します。</p>

<p>・親ノード</p>
<div class="highlight"><pre><code class="language-java" data-lang="java">    <span class="err">#</span> <span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">selenium</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">standalone</span><span class="o">-</span><span class="mf">2.41</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="na">jar</span> <span class="o">-</span><span class="n">role</span> <span class="n">hub</span> <span class="o">-</span><span class="n">port</span> <span class="mi">4445</span>
</code></pre></div>
<p>・子ノード</p>
<div class="highlight"><pre><code class="language-java" data-lang="java">    <span class="o">&gt;</span> <span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">selenium</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">standalone</span><span class="o">-</span><span class="mf">2.41</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="na">jar</span> <span class="o">-</span><span class="n">role</span> <span class="n">webdriver</span> <span class="o">-</span><span class="n">hub</span> <span class="nl">http:</span><span class="c1">//192.168.130.130:4445/grid/register -Dwebdriver.ie.driver=./IEDriverServer.exe</span>
</code></pre></div></li>
<li><p>Jenkins プラグイン追加</p>

<p>rvmでrubyを使っているので、予めJenkinsにrvmプラグインを追加。</p>

<p>Jenkinsのダッシュボードから[Jenkinsの管理]-[プラグインの管理]-[利用可能]</p>

<p>右上のフィルターでrvmと打つとRVMプラグインが表示されるのでチェックをつけ、[再起動せずにインストール]クリック。</p>

<p>(インストールは何回か失敗することがあります)</p></li>
<li><p>Jenkins ジョブ追加</p>

<p>Jenkinsのダッシュボードから[新規ジョブ作成]、ジョブ名を入力し、[フリースタイル・プロジェクトのビルド]を選択して[OK]クリック。</p>

<p>ビルド環境のRVMで使用したいrubyのバージョンを指定。(自分の場合 2.1.1) (下図参照)</p>

<p>シェルスクリプトで下記のように指定。(パス等は読み替えて下さい) (下図参照)</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">/usr/local/rvm/rubies/ruby-2.1.1/bin/ruby /app/seleniumtest/seleniumtest_4445.rb
</code></pre></div>
<p>「保存」ボタンクリック。</p>

<p><a href="/assets/posts/img/jenkins_selenium/jenkins_project.png" target="_blank"><img width="50%" height="50%" title="Jenkinsプロジェクト設定" alt="Jenkinsプロジェクト設定" src="/assets/posts/img/jenkins_selenium/jenkins_project.png"></a></p></li>
<li><p>rubyスクリプト</p>

<p>上記でJenkinsに設定した &quot;seleniumtest_4445.rb&quot; は以下の内容です。(ポート番号4445でアクセス)</p>

<script src="https://gist.github.com/dc5fb2d680b67acefbf3.js?file=seleniumtest_4445.rb"> </script></li>
</ul>

<h3>2.起動</h3>

<ul>
<li><p>ビルド実行</p>

<p>上記で作成したジョブで「ビルド実行」をクリック。</p>

<p>子ノードでIEが起動すれば成功です。</p></li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="/page2" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="">1</a>
      
    </li>
    
      <li>
        
          <a href="/page2">2</a>
        
      </li>
    
      <li>
        
          <span class="current-page">3</span>
        
      </li>
    
      <li>
        
          <a href="/page4">4</a>
        
      </li>
    
      <li>
        
          <a href="/page5">5</a>
        
      </li>
    
      <li>
        
          <a href="/page6">6</a>
        
      </li>
    
      <li>
        
          <a href="/page7">7</a>
        
      </li>
    
      <li>
        
          <a href="/page8">8</a>
        
      </li>
    
      <li>
        
          <a href="/page9">9</a>
        
      </li>
    
  </ul>
  
    <a href="/page4" class="btn">Next</a>
  
</div><!-- /.pagination -->

<div>
<div align="center"><font color="#20B2AA" >【免責事項】</font></div><br>
本ブログのご利用につき、何らかのトラブルや損失・損害等につきましては一切責任を問わないものとします。
</div>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 sankame. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/" rel="notfollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37675354-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

          

</body>
</html>