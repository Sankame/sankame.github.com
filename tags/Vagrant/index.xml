<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Vagrant on プログラマー備忘録</title>
    <link>https://sankame.github.io/tags/vagrant/index.xml</link>
    <description>Recent content in Vagrant on プログラマー備忘録</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <atom:link href="https://sankame.github.io/tags/vagrant/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Vagrant &#43; VirtualBox でCentOS開発環境構築</title>
      <link>https://sankame.github.io/blog/2015-05-06-vagrant_setup/</link>
      <pubDate>Wed, 06 May 2015 00:00:00 +0000</pubDate>
      
      <guid>https://sankame.github.io/blog/2015-05-06-vagrant_setup/</guid>
      <description>

&lt;p&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&#34;color:#d14; float:right;&#34;&gt;更新日：2017年01月28日&lt;/span&gt;&lt;/p&gt;

&lt;h3 id=&#34;0-環境&#34;&gt;0.環境&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;[PC]  DELL LATITUDE E5500
[OS]  Windows7 (32bit 版)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;1-概要&#34;&gt;1.概要&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Vagrantで開発環境を作りました。&lt;/p&gt;

&lt;p&gt;VirtualBoxを操作するためにVagrantというツールを使うイメージです。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://sankame.github.io/assets/posts/img/vagrant_setup/vagrant.jpg&#34; target=&#34;_blank&#34;&gt;&lt;img width=&#34;100%&#34; height=&#34;100%&#34; title=&#34;接続情報&#34; alt=&#34;接続情報&#34; src=&#34;https://sankame.github.io/assets/posts/img/vagrant_setup/vagrant.jpg&#34;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;VirtualBox上に仮想マシン(以下VM)起動し、そこにCentOSをインストールして開発環境とします。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;2-bios設定変更&#34;&gt;2.BIOS設定変更&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;VMを起動する前準備として、BIOSの設定を変更します。&lt;/p&gt;

&lt;p&gt;PC起動時に、OSが起動する前に特定のキーを押してBIOS設定画面を開きます。&lt;/p&gt;

&lt;p&gt;(PCによって異なるので、下記は自分のPCに読み替えて下さい)&lt;/p&gt;

&lt;p&gt;PC起動時に[F2] または [F10]キーを押下。&lt;/p&gt;

&lt;p&gt;[Virtualization Support] - [Virtualization]を選択し、[Enable]にチェックをつけて[Apply]→[Exit]を選択。&lt;/p&gt;

&lt;p&gt;そのままOSが起動するのを待ちます。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;3-virtualboxインストール&#34;&gt;3.VirtualBoxインストール&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下記ページで&amp;rdquo;VirtualBox 4.3.26 for Windows hosts&amp;rdquo; をクリックしVirtualBoxをダウンロード。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.virtualbox.org/wiki/Downloads&#34; target=&#34;_blank&#34;&gt;VirtualBoxダウンロード&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ダウンロードもインストールも僕の環境では数分かかりました。&lt;/p&gt;

&lt;p&gt;途中何度かOracle社のコンポーネントをインストールしますか？と聞かれたので全てYesを選択。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;4-vagrantインストール&#34;&gt;4.Vagrantインストール&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下記ページでWindows用を選択して Vagrantをダウンロード。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.vagrantup.com/downloads.html&#34; target=&#34;_blank&#34;&gt;Vagrantダウンロード&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;インストールが終わったら再起動を求められます。&lt;/p&gt;

&lt;p&gt;boxファイル(用意されたVMイメージ)を取得し、VirtualBoxに追加。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-control&#34;&gt;C:\Users\【ユーザー名】&amp;gt; vagrant box add CentOS65 https://github.com/2creatives/vagrant-centos/releases/download/v6.5.3/centos65-x86_64-20140116.box
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;5-vagrantを使ってvirtualboxのvmを起動&#34;&gt;5.Vagrantを使ってVirtualBoxのVMを起動&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;適当なフォルダにVagrantファイルを作成し、VM起動時の設定を定義します。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-control&#34;&gt;C:\apps\Vagrant\Vagrantfiles&amp;gt;mkdir centos

C:\apps\Vagrant\Vagrantfiles&amp;gt;cd centos

C:\apps\Vagrant\Vagrantfiles\centos&amp;gt;vagrant init CentOS65
A `Vagrantfile` has been placed in this directory. You are now
ready to `vagrant up` your first virtual environment! Please read
the comments in the Vagrantfile as well as documentation on
`vagrantup.com` for more information on using Vagrant.

C:\apps\Vagrant\Vagrantfiles\centos&amp;gt;dir
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;自動生成された Vagrantfile を編集。&lt;/p&gt;

&lt;p&gt;必要な箇所のコメントアウトを解除します。（編集前後のdiffを記載）&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-diff&#34;&gt;# diff Vagrantfile.org Vagrantfile                       
29c29
&amp;lt;   # config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.33.10&amp;quot;
---
&amp;gt;   config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.33.10&amp;quot;
46c47
&amp;lt;   # config.vm.provider &amp;quot;virtualbox&amp;quot; do |vb|
---
&amp;gt;   config.vm.provider &amp;quot;virtualbox&amp;quot; do |vb|
48c49
&amp;lt;   #   vb.gui = true
---
&amp;gt;       vb.gui = true
51,52c52,53
&amp;lt;   #   vb.memory = &amp;quot;1024&amp;quot;
&amp;lt;   # end
---
&amp;gt;       vb.memory = &amp;quot;1024&amp;quot;
&amp;gt;   end
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&amp;ldquo;vb.gui = true&amp;rdquo; のコメントアウトを解除しないと、VM起動時に下記エラーが出続けるので注意。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-control&#34;&gt;default: Warning: Connection timeout. Retrying...
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;編集が終わったら VagrantコマンドでVMを起動。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-control&#34;&gt;C:\apps\Vagrant\Vagrantfiles\centos&amp;gt; vagrant up
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;6-ターミナルソフトでvmに接続&#34;&gt;6.ターミナルソフトでVMに接続&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;使い慣れたターミナルソフトでVMに接続します。&lt;/p&gt;

&lt;p&gt;まずは用意された user=vagrant, password=vagrant で接続。&lt;/p&gt;

&lt;p&gt;(下記はpoderosaでの接続例)&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://sankame.github.io/assets/posts/img/vagrant_setup/poderosa.png&#34; target=&#34;_blank&#34;&gt;&lt;img width=&#34;20%&#34; height=&#34;20%&#34; title=&#34;接続情報&#34; alt=&#34;接続情報&#34; src=&#34;https://sankame.github.io/assets/posts/img/vagrant_setup/poderosa.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;以降は root で接続したいので、rootのパスワードを再設定します。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo passwd root
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;7-その他-ファイル共有&#34;&gt;7.その他：ファイル共有&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ホストOS(Windows)とゲストOS(CentOS)でファイル共有したい場合、上記5の Vagrantfile で下記の行を有効にします。&lt;/p&gt;

&lt;p&gt;Vagrantfileの変更を反映するにはVMの再起動が必要。&lt;/p&gt;

&lt;p&gt;(例) 左がWindows、右がCentOSのパス。(Windowsのパスは\を2つ重ねる必要あり)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-control&#34;&gt;config.vm.synced_folder &amp;quot;c:\\vm\\share&amp;quot;, &amp;quot;/share&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;参考にしたページ&#34;&gt;※参考にしたページ&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://qiita.com/hiroyasu55/items/11a4c996b0c62450940f&#34; target=&#34;_blank&#34;&gt;インストール手順&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://sakashushu.blog.so-net.ne.jp/2014-06-16&#34; target=&#34;_blank&#34;&gt;エラーの際に役立ったページ&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>